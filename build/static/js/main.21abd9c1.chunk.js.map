{"version":3,"sources":["img/nav_insert.svg","img/nav_view.svg","img/nav_dashboard.svg","img/nav_signout.svg","components/Navbar.js","firebase.js","pages/Firestore.js","img/header_logo.svg","img/stage_customer.svg","img/stage_expansion.svg","img/stage_lead.svg","img/channel_offline.svg","img/channel_online.svg","img/sfl_logo.svg","components/LoadingBar.js","img/status_success.svg","components/SuccessBar.js","img/status_error.svg","components/ErrorBar.js","pages/InsertPage.js","pages/ViewPage.js","pages/Dashboard.js","pages/Account.js","pages/Report.js","App.js","index.js"],"names":["Navbar","props","style","paddingBottom","className","to","active","src","navInsert","navView","navDashoboard","navSignout","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthContext","React","createContext","useFirestore","useContext","DataProvider","children","useState","customerList","setCustomerList","targetList","setTargetList","forecastList","setForecastList","reportList","setReportList","year","week","reports","a","firestore","collection","doc","set","console","log","status","message","forecast","goal","ucl_goal","ucl","lkb_goal","lkb","ptk_goal","ptk","newData","currentCustomer","docref","myref","customer_transactions","dt","moment","unix","lastupdate","stage","transaction","customer_so","customer_sales","customer_category","sale_person","sale_branch","channel","push","update","add","useEffect","ref","unsubscribe","onSnapshot","docSnapshot","list","forEach","id","data","sort","b","dt_lastupdate","err","values","addCustomer","updateTarget","updateForecast","updateReport","Provider","value","LoadingBar","mainLogo","SuccessBar","success","onClick","setSuccess","ErrorBar","error","setError","InsertPage","setCurrentCustomer","currentStage","setCurrentStage","currentSearch","setCurrentSearch","phoneSearch","setPhoneSearch","initialForm","setInitialForm","loading","setLoading","name","sale","branches","selectedBranch","setSelectedBranch","otherReason","setOtherReason","numberWithCommas","num","num_parts","toString","replace","split","join","phone","lead_reason","lead_otherReason","lead_category","lead_sales","undefined","formValidation","Yup","shape","required","min","max","matches","when","is","then","logo","enableReinitialize","initialValues","validationSchema","validateOnChange","validateOnBlur","onSubmit","setSubmitting","resetForm","result","errors","handleChange","touched","handleBlur","handleSubmit","isSubmitting","setFieldValue","type","placeholder","onChange","onBlur","checked","disabled","stage_lead","stage_customer","stage_expansion","e","currentTarget","display","label","find","x","map","branch","index","channel_offline","channel_online","Auto","setDisplay","options","setOptions","objectSearch","nameKey","myArray","length","i","event","target","filter","option","toLowerCase","indexOf","slice","selectAuto","ViewPage","filterList","setFilterList","showPicker","setShowPicker","startDate","Date","endDate","key","selectedDate","setSelectedDate","position","editableDateInputs","item","selection","customer","moveRangeOnFirstSelection","ranges","rowspan","colspan","format","my_index","reduce","prev","curr","Dashboard","sales","customers","section1","section2","section3","section4","section5","section6","section7","section8","section9","section10","section11","section12","section13","weeks","duration","setDuration","transactions","setTransactions","statSales","setStatSales","statTargetSales","statLWSales","setStatLWSales","statLeads","setStatLeads","statLWLeads","setStatLWLeads","statCustomers","setStatCustomers","statLWCustomers","setStatLWCustomers","statExpansions","setStatExpansions","statLWExpansions","setStatLWExpansions","statLosts","setStatLosts","setStatLWLosts","statLeadsUCL","setStatLeadsUCL","statLeadsPTK","setStatLeadsPTK","statLeadsLKB","setStatLeadsLKB","statCustomersUCL","setStatCustomersUCL","statCustomersPTK","setStatCustomersPTK","statCustomersLKB","setStatCustomersLKB","statExpansionsUCL","setStatExpansionsUCL","statExpansionsPTK","setStatExpansionsPTK","statExpansionsLKB","setStatExpansionsLKB","periodSales","setPeriodSales","periodTargetSales","setPeriodTargetSales","periodUCLSales","setPeriodUCLSales","periodPTKSales","setPeriodPTKSales","periodLKBSales","setPeriodLKBSales","sumUCLSales","setSumUCLSales","sumPTKSales","setSumPTKSales","sumLKBSales","setSumLKBSales","lostsReason","setLostReasons","categorySales","setCategorySales","topSpender","setTopSpender","channelUCLOnline","setChannelUCLOnline","channelUCLOffline","setChannelUCLOffline","channelPTKOnline","setChannelPTKOnline","channelPTKOffline","setChannelPTKOffline","channelLKBOnline","setChannelLKBOnline","channelLKBOffline","setChannelLKBOffline","targetSalesUCL","setTargetSalesUCL","targetSalesPTK","setTargetSalesPTK","targetSalesLKB","setTargetSalesLKB","hasOwnProperty","all_transactions","_statLeads","_statCustomers","_statExpansions","_statLosts","_statLWLeads","_statLWCustomers","_statLWExpansions","_statLeadsUCL","_statLeadsPTK","_statLeadsLKB","_statCustomersUCL","_statCustomersPTK","_statCustomersLKB","_statExpansionsUCL","_statExpansionsPTK","_statExpansionsLKB","_channelUCLOnline","_channelUCLOffline","_channelPTKOnline","_channelPTKOffline","_channelLKBOnline","_channelLKBOffline","_lostsReason","_categorySales","_topSpender","today","el","findIndex","mySum","trans","j","tran","parseInt","sale_dt","sale_wk","sale_month","sale_year","register_branch","myCustomer","_statSales","_statLWSales","_periodSales","_periodTargetSales","_periodUCLSales","_periodPTKSales","_periodLKBSales","r","sale_week","_sumUCLSales","_sumPTKSales","_sumLKBSales","leadConversionBySourceData","salesFunnelByBranch","formatted","input","formattedSign","text","formattedDec","toFixed","margin","top","right","bottom","left","xScale","yScale","stacked","reverse","yFormat","axisTop","axisRight","axisBottom","orient","tickSize","tickPadding","tickRotation","legend","legendOffset","legendPosition","axisLeft","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","from","pointLabelYOffset","useMesh","legends","anchor","direction","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","effects","on","itemBackground","valueFormat","colors","scheme","borderWidth","labelColor","modifiers","beforeSeparatorLength","beforeSeparatorOffset","afterSeparatorLength","afterSeparatorOffset","currentPartSizeExtension","currentBorderWidth","motionConfig","keys","indexBy","padding","valueScale","indexScale","round","defs","background","color","size","stagger","rotation","lineWidth","spacing","fill","match","borderColor","labelSkipWidth","labelSkipHeight","labelTextColor","dataFrom","animate","motionStiffness","motionDamping","innerRadius","padAngle","cornerRadius","activeOuterRadiusOffset","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","arcLinkLabelsThickness","arcLinkLabelsColor","arcLabelsSkipAngle","arcLabelsTextColor","itemTextColor","Account","month","v","Report","useRef","createRef","yearTransaction","monthTransaction","weekTransaction","sum","array","month_number","firstOfMonth","lastOfMonth","used","getDay","getDate","Math","ceil","targetRef","filename","toPdf","textAlign","class","height","forecastSales","forecastCustomers","App","path","exact","render","isAuthed","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.21abd9c1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/nav_insert.0a1da696.svg\";","export default __webpack_public_path__ + \"static/media/nav_view.f9d36fdf.svg\";","export default __webpack_public_path__ + \"static/media/nav_dashboard.e1011279.svg\";","export default __webpack_public_path__ + \"static/media/nav_signout.351ab269.svg\";","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport \"./style.css\";\r\n\r\nimport navInsert from \"../img/nav_insert.svg\";\r\nimport navView from \"../img/nav_view.svg\";\r\nimport navDashoboard from \"../img/nav_dashboard.svg\";\r\nimport navSignout from \"../img/nav_signout.svg\";\r\n\r\nexport default function Navbar(props) {\r\n  return (\r\n    <>\r\n      <div style={{ paddingBottom: \"100px\" }} />\r\n      <div className={\"container\"}>\r\n        <div className=\"navigator\">\r\n          <Link\r\n            to=\"/\"\r\n            className={\r\n              \"nav-item \" + (props.active == \"กรอกข้อมูล\" ? \"active\" : \"\")\r\n            }\r\n          >\r\n            <div className=\"nav-holder\">\r\n              <img src={navInsert} className=\"nav-icn\" />\r\n              <div className=\"line-break\" />\r\n              <div className=\"nav_content\">กรอกข้อมูล</div>\r\n            </div>\r\n            <div className={\"nav_status\"} />\r\n          </Link>\r\n\r\n          <Link\r\n            to=\"/view\"\r\n            className={\r\n              \"nav-item \" + (props.active == \"ดูข้อมูล\" ? \"active\" : \"\")\r\n            }\r\n          >\r\n            <div className=\"nav-holder\">\r\n              <img src={navView} className=\"nav-icn\" />\r\n              <div className=\"line-break\" />\r\n              <div className=\"nav_content\">ดูข้อมูล</div>\r\n            </div>\r\n            <div className={\"nav_status\"} />\r\n          </Link>\r\n\r\n          <Link\r\n            to=\"/dashboard\"\r\n            className={\r\n              \"nav-item \" + (props.active == \"Dashboard\" ? \"active\" : \"\")\r\n            }\r\n          >\r\n            <div className=\"nav-holder\">\r\n              <img src={navDashoboard} className=\"nav-icn\" />\r\n              <div className=\"line-break\" />\r\n              <div className=\"nav_content\">Dashboard</div>\r\n            </div>\r\n            <div className={\"nav_status\"} />\r\n          </Link>\r\n\r\n          <Link\r\n            to=\"/account\"\r\n            className={\r\n              \"nav-item \" + (props.active == \"ออกจากระบบ\" ? \"active\" : \"\")\r\n            }\r\n          >\r\n            <div className=\"nav-holder\">\r\n              <img src={navSignout} className=\"nav-icn\" />\r\n              <div className=\"line-break\" />\r\n              <div className=\"nav_content\">Setting</div>\r\n            </div>\r\n            <div className={\"nav_status ช\"} />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAazkxHSh5fjNrQE9LzGghBZwYZcFviTBU\",\r\n  authDomain: \"sfl-crm.firebaseapp.com\",\r\n  projectId: \"sfl-crm\",\r\n  storageBucket: \"sfl-crm.appspot.com\",\r\n  messagingSenderId: \"765849402237\",\r\n  appId: \"1:765849402237:web:96b7616e9a77916b04ea14\",\r\n  measurementId: \"G-L0STWG1NBT\"\r\n};\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport firebase from \"../firebase\";\r\nimport moment from \"moment\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport function useFirestore() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function DataProvider({ children }) {\r\n  const [customerList, setCustomerList] = useState();\r\n  const [targetList, setTargetList] = useState();\r\n  const [forecastList, setForecastList] = useState();\r\n  const [reportList, setReportList] = useState();\r\n\r\n  useEffect(async () => {\r\n    const ref = firebase.firestore().collection(\"customers\");\r\n    const unsubscribe = ref.onSnapshot(\r\n      docSnapshot => {\r\n        let list = [];\r\n        docSnapshot.forEach(function(doc) {\r\n          //console.log(doc.data());\r\n          list.push({ myref: doc.id, ...doc.data() });\r\n        });\r\n        list = list.sort((a, b) => b.dt_lastupdate - a.dt_lastupdate);\r\n        setCustomerList(list);\r\n      },\r\n      err => {\r\n        console.log(`Encountered error: ${err}`);\r\n      }\r\n    );\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  \r\n\r\n  useEffect(async () => {\r\n    const ref = firebase.firestore().collection(\"target\");\r\n    const unsubscribe = ref.onSnapshot(\r\n      docSnapshot => {\r\n        let list = {};\r\n        docSnapshot.forEach(function(doc) {\r\n          //console.log(doc.data());\r\n          if(doc.id == \"UCL\") list.ucl = doc.data()\r\n          if(doc.id == \"LKB\") list.lkb = doc.data()\r\n          if(doc.id == \"PTK\") list.ptk = doc.data()\r\n        });\r\n        setTargetList(list);\r\n      },\r\n      err => {\r\n        console.log(`Encountered error: ${err}`);\r\n      }\r\n    );\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  useEffect(async () => {\r\n    const ref = firebase.firestore().collection(\"forecast\");\r\n    const unsubscribe = ref.onSnapshot(\r\n      docSnapshot => {\r\n        let list = {};\r\n        docSnapshot.forEach(function(doc) {\r\n          //console.log(doc.data());\r\n          list[doc.id] = doc.data();\r\n        });\r\n        setForecastList(list);\r\n      },\r\n      err => {\r\n        console.log(`Encountered error: ${err}`);\r\n      }\r\n    );\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  useEffect(async () => {\r\n    const ref = firebase.firestore().collection(\"reports\");\r\n    const unsubscribe = ref.onSnapshot(\r\n      docSnapshot => {\r\n        let list = {};\r\n        docSnapshot.forEach(function(doc) {\r\n          //console.log(doc.data());\r\n          list[doc.id] = doc.data();\r\n        });\r\n        setReportList(list);\r\n      },\r\n      err => {\r\n        console.log(`Encountered error: ${err}`);\r\n      }\r\n    );\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  async function updateReport(year, week, reports) {\r\n    try {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"reports\")\r\n        .doc(year+\"-\"+week)\r\n        .set(reports);\r\n      console.log(\"SUCCESS REPORT GOAL\");\r\n      return {\r\n        status: \"success\",\r\n        message: \"บันทึกข้อมูลสำเร็จ\"\r\n      };\r\n    } catch (error) {\r\n      console.log(\"ERROR REPORT GOAL\", error);\r\n      return {\r\n        status: \"error\",\r\n        message: \"บันทึกข้อมูลผิดพลาด\"\r\n      };\r\n    }\r\n  }\r\n\r\n  async function updateForecast(year, week, forecast) {\r\n    try {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"forecast\")\r\n        .doc(year+\"-\"+week)\r\n        .set(forecast);\r\n      console.log(\"SUCCESS FORECAST GOAL\");\r\n      return {\r\n        status: \"success\",\r\n        message: \"บันทึกข้อมูลสำเร็จ\"\r\n      };\r\n    } catch (error) {\r\n      console.log(\"ERROR FORECAST GOAL\", error);\r\n      return {\r\n        status: \"error\",\r\n        message: \"บันทึกข้อมูลผิดพลาด\"\r\n      };\r\n    }\r\n  }\r\n\r\n  async function updateTarget(year, goal) {\r\n    let ucl_goal = {[year] : goal.ucl};\r\n    let lkb_goal = {[year] : goal.lkb};\r\n    let ptk_goal = {[year] : goal.ptk};\r\n    try {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"target\")\r\n        .doc(\"UCL\")\r\n        .set(ucl_goal);\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"target\")\r\n        .doc(\"LKB\")\r\n        .set(lkb_goal);\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"target\")\r\n        .doc(\"PTK\")\r\n        .set(ptk_goal);\r\n      console.log(\"SUCCESS UPDATE GOAL\");\r\n      return {\r\n        status: \"success\",\r\n        message: \"บันทึกข้อมูลสำเร็จ\"\r\n      };\r\n    } catch (error) {\r\n      console.log(\"ERROR UPDATE GOAL\", error);\r\n      return {\r\n        status: \"error\",\r\n        message: \"บันทึกข้อมูลผิดพลาด\"\r\n      };\r\n    }\r\n  }\r\n\r\n  async function addCustomer(newData, currentCustomer) {\r\n    //console.log(\"1\", newData);\r\n    let docref = newData.myref;\r\n    delete newData.myref;\r\n    let customer_transactions = [];\r\n    if (currentCustomer) {\r\n      customer_transactions = currentCustomer.customer_transactions;\r\n    }\r\n    //console.log(\"2\", newData);\r\n\r\n    newData.dt = moment().unix();\r\n    newData.lastupdate = moment().unix();\r\n\r\n    if (newData.stage == \"Customer\" || newData.stage == \"Expansion\") {\r\n      let transaction = {\r\n        customer_so: newData.customer_so,\r\n        customer_sales: newData.customer_sales,\r\n        customer_category: newData.customer_category,\r\n        sale_person: newData.sale_person,\r\n        sale_branch: newData.sale_branch,\r\n        channel: newData.channel,\r\n        dt: moment().unix()\r\n      };\r\n      customer_transactions.push(transaction);\r\n      delete newData.channel;\r\n      delete newData.dt;\r\n      delete newData.sale_person;\r\n      delete newData.sale_branch;\r\n    }\r\n    newData.customer_transactions = customer_transactions;\r\n\r\n    delete newData.customer_so;\r\n    delete newData.customer_sales;\r\n    delete newData.customer_category;\r\n    //console.log(\"3\", newData);\r\n    if (docref) {\r\n      console.log(\"UPDATE\", newData);\r\n      try {\r\n        const result = await firebase\r\n          .firestore()\r\n          .collection(\"customers\")\r\n          .doc(docref)\r\n          .update(newData);\r\n        console.log(\"SUCCESS UPDATE\");\r\n        return {\r\n          status: \"success\",\r\n          message: \"อัพเดทข้อมูลสำเร็จ\"\r\n        };\r\n      } catch (error) {\r\n        console.log(\"ERROR UPDATE\", error);\r\n        return {\r\n          status: \"success\",\r\n          message: \"อัพเดทข้อมูลผิดพลาด\"\r\n        };\r\n      }\r\n    } else {\r\n      console.log(\"ADD\", newData);\r\n      try {\r\n        const result = await firebase\r\n          .firestore()\r\n          .collection(\"customers\")\r\n          .add(newData);\r\n        console.log(\"SUCCESS ADD\");\r\n        return {\r\n          status: \"success\",\r\n          message: \"เพิ่มข้อมูลสำเร็จ\"\r\n        };\r\n      } catch (error) {\r\n        console.log(\"ERROR ADD\", error);\r\n        return {\r\n          status: \"error\",\r\n          message: \"เพิ่มข้อมูลผิดพลาด\"\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  const values = { forecastList,customerList, targetList, reportList, addCustomer, updateTarget, updateForecast, updateReport };\r\n  return <AuthContext.Provider value={values}>{children}</AuthContext.Provider>;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/header_logo.6ca17882.svg\";","export default __webpack_public_path__ + \"static/media/stage_customer.2f8268a1.svg\";","export default __webpack_public_path__ + \"static/media/stage_expansion.213978a8.svg\";","export default __webpack_public_path__ + \"static/media/stage_lead.c6d1520c.svg\";","export default __webpack_public_path__ + \"static/media/channel_offline.a7d74f8b.svg\";","export default __webpack_public_path__ + \"static/media/channel_online.52287684.svg\";","export default __webpack_public_path__ + \"static/media/sfl_logo.bd0bb202.svg\";","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport mainLogo from \"../img/sfl_logo.svg\";\r\n\r\nexport default function LoadingBar() {\r\n  return (\r\n    <>\r\n      <div className=\"loading-screen\">\r\n        <div className=\"loading-holder\">\r\n          <img src={mainLogo} />\r\n          {/*<div>กำลังโหลดข้อมูล ...</div>*/}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/status_success.f6424d1b.svg\";","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport success from \"../img/status_success.svg\";\r\n\r\nexport default function SuccessBar(props) {\r\n  return (\r\n    <>\r\n      <div className=\"status-screen\">\r\n        <div className=\"status-holder\">\r\n          <h1>บันทึกสำเร็จ</h1>\r\n          <img src={success} className=\"status-img\" />\r\n          <div\r\n            onClick={() => {\r\n              props.setSuccess(false);\r\n            }}\r\n            className=\"status-close\"\r\n          >\r\n            x ปิดที่นี่\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/status_error.512f362d.svg\";","import React, { useState, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport error from \"../img/status_error.svg\";\r\n\r\nexport default function ErrorBar(props) {\r\n  return (\r\n    <>\r\n      <div className=\"status-screen\">\r\n        <div className=\"status-holder\">\r\n          <h1>เกิดข้อผิดพลาด</h1>\r\n          <img src={error} className=\"status-img\" />\r\n          <div\r\n            onClick={() => {\r\n              props.setError(false);\r\n            }}\r\n            className=\"status-close\"\r\n          >\r\n            x ปิดที่นี่\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Formik, Field } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useFirestore } from \"./Firestore.js\";\r\nimport logo from \"../img/header_logo.svg\";\r\n\r\nimport stage_customer from \"../img/stage_customer.svg\";\r\nimport stage_expansion from \"../img/stage_expansion.svg\";\r\nimport stage_lead from \"../img/stage_lead.svg\";\r\n\r\nimport channel_offline from \"../img/channel_offline.svg\";\r\nimport channel_online from \"../img/channel_online.svg\";\r\n\r\nimport LoadingBar from \"../components/LoadingBar\";\r\nimport SuccessBar from \"../components/SuccessBar\";\r\nimport ErrorBar from \"../components/ErrorBar\";\r\n\r\nexport default function InsertPage() {\r\n  const { addCustomer } = useFirestore();\r\n  const [currentCustomer, setCurrentCustomer] = useState();\r\n  const [currentStage, setCurrentStage] = useState();\r\n  const [currentSearch, setCurrentSearch] = useState(\"\");\r\n  const [phoneSearch, setPhoneSearch] = useState(\"\");\r\n  const [initialForm, setInitialForm] = useState();\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [branches, setBranches] = useState([\r\n    { name: \"พระรามสี่\", sale: [\"เนส\", \"ชมพู่\", \"จีน่า\", \"นิด\", \"นนท์\"] },\r\n    { name: \"พัฒนาการ\", sale: [\"สิท\", \"ตอง\", \"เบ๊บ\", \"เบญ\", \"วิคเตอร์\"] },\r\n    { name: \"ลาดกระบัง\", sale: [\"ตูน\", \"ส้ม\", \"โจ้\", \"โป๊บ\"] }\r\n  ]);\r\n  const [selectedBranch, setSelectedBranch] = useState();\r\n  const [otherReason, setOtherReason] = useState(false);\r\n\r\n  useEffect(async () => {\r\n    //console.log(\"CURRENT CUSTOMER\", currentCustomer);\r\n    //console.log(\"CURRENT SEARCH\", currentSearch);\r\n    if (currentCustomer && currentCustomer.phone != currentSearch) {\r\n      setCurrentCustomer();\r\n      setInitialForm({\r\n        myref: \"\",\r\n        sale_person: \"\",\r\n        sale_branch: \"\",\r\n        phone: \"\",\r\n        name: \"\",\r\n        stage: \"Lead\",\r\n        channel: \"offline\",\r\n        lead_reason: \"\",\r\n        lead_otherReason: \"\",\r\n        lead_category: [],\r\n        lead_sales: \"\",\r\n        customer_so: \"\",\r\n        customer_sales: \"\",\r\n        customer_category: []\r\n      });\r\n    } else {\r\n      setInitialForm({\r\n        myref:\r\n          currentCustomer && currentCustomer.myref != undefined\r\n            ? currentCustomer.myref\r\n            : \"\",\r\n        sale_person: \"\",\r\n        sale_branch: \"\",\r\n        phone: currentSearch && currentSearch != undefined ? currentSearch : \"\",\r\n        name:\r\n          currentCustomer && currentCustomer.name != undefined\r\n            ? currentCustomer.name\r\n            : \"\",\r\n        stage:\r\n          currentStage && currentStage != undefined ? currentStage : \"Lead\",\r\n        channel:\r\n          currentCustomer && currentCustomer.channel != undefined\r\n            ? currentCustomer.channel\r\n            : \"offline\",\r\n        lead_reason:\r\n          currentCustomer && currentCustomer.lead_reason != undefined\r\n            ? currentCustomer.lead_reason\r\n            : \"\",\r\n        lead_otherReason:\r\n          currentCustomer && currentCustomer.lead_otherReason != undefined\r\n            ? currentCustomer.lead_otherReason\r\n            : \"\",\r\n        lead_category: [],\r\n        lead_sales:\r\n          currentCustomer && currentCustomer.lead_sales != undefined\r\n            ? currentCustomer.lead_sales\r\n            : \"\",\r\n        customer_so: \"\",\r\n        customer_sales: \"\",\r\n        customer_category: []\r\n      });\r\n    }\r\n  }, [currentCustomer, currentSearch, currentStage]);\r\n\r\n  function numberWithCommas(num) {\r\n    if (num) {\r\n      var num_parts = num\r\n        .toString()\r\n        .replace(/,/g, \"\")\r\n        .split(\".\");\r\n      num_parts[0] = num_parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      return num_parts.join(\".\");\r\n    } else return \"\";\r\n  }\r\n\r\n  const formValidation = Yup.object().shape({\r\n    phone: Yup.string()\r\n      .required(\"*กรุณากรอก\")\r\n      .min(10, \"*กรุณากรอก 10 หลัก\")\r\n      .max(11, \"*กรุณากรอก 10 หลัก\"),\r\n    name: Yup.string()\r\n      .required(\"*กรุณากรอก\")\r\n      .matches(/(?!^\\d+$)^.+$/, \"*ห้ามเป็นตัวเลขอย่างเดียว\"),\r\n    stage: Yup.string().required(\"*กรุณากรอก\"),\r\n    channel: Yup.string().required(\"*กรุณากรอก\"),\r\n    sale_person: Yup.string().required(\"*กรุณากรอก\"),\r\n    sale_branch: Yup.string().required(\"*กรุณากรอก\"),\r\n    lead_reason: Yup.string().when(\"stage\", {\r\n      is: value => value == \"Lead\",\r\n      then: Yup.string().required(\"*กรุณากรอก\")\r\n    }),\r\n    lead_otherReason: Yup.string().when(\"lead_reason\", {\r\n      is: value => value == \"อื่นๆ\",\r\n      then: Yup.string().required(\"*กรุณากรอก\")\r\n    }),\r\n    lead_sales: Yup.string().when(\"stage\", {\r\n      is: value => value == \"Lead\",\r\n      then: Yup.string().required(\"*กรุณากรอก\")\r\n    }),\r\n    customer_sales: Yup.string().when(\"stage\", {\r\n      is: value => value == \"Customer\" || value == \"Expansion\",\r\n      then: Yup.string().required(\"*กรุณากรอก\")\r\n    }),\r\n    customer_so: Yup.string().when(\"stage\", {\r\n      is: value => value == \"Customer\" || value == \"Expansion\",\r\n      then: Yup.string().required(\"*กรุณากรอก\")\r\n    })\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {loading && <LoadingBar />}\r\n      {success && <SuccessBar setSuccess={setSuccess} />}\r\n      {error && <ErrorBar setError={setError} />}\r\n      <div className=\"header\">\r\n        <img src={logo} className=\"logo\" />\r\n      </div>\r\n\r\n      <div className=\"holder\">\r\n        <div className=\"notice-box\">\r\n          <label className=\"success\">{success}</label>\r\n          <label className=\"error\">{error}</label>\r\n        </div>\r\n        <Formik\r\n          enableReinitialize\r\n          initialValues={{ ...initialForm }}\r\n          validationSchema={formValidation}\r\n          validateOnChange={false}\r\n          validateOnBlur={false}\r\n          \r\n          onSubmit={async (values, { setSubmitting,resetForm }) => {\r\n            console.log(values);\r\n            setSubmitting(true);\r\n            setLoading(true);\r\n            const result = await addCustomer(values, currentCustomer);\r\n            console.log(result);\r\n            setSubmitting(false);\r\n            setLoading(false);\r\n            if (result.status == \"success\") {\r\n              setSuccess(true);\r\n              setError(false);\r\n              currentSearch();\r\n              setCurrentStage();\r\n              setCurrentCustomer();\r\n              resetForm();\r\n            } else {\r\n              setSuccess(false);\r\n              setError(true);\r\n            }\r\n            return;\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            isSubmitting,\r\n            setFieldValue,\r\n            resetForm\r\n          }) => (\r\n            <form onSubmit={handleSubmit} className=\"insert-form\">\r\n              <div className=\"form-header\">\r\n                <h1>CRM </h1>\r\n                <div>สวัสดี, SPORT FOR LIFE</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"content\">\r\n                  <label className=\"formError\">\r\n                    {errors.myref && errors.myref}\r\n                  </label>\r\n                  <input\r\n                    type=\"hidden\"\r\n                    name=\"myref\"\r\n                    placeholder=\"รหัสลูกค้า\"\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.myref || \"\"}\r\n                  />\r\n                </div>\r\n                <label className=\"formError\">\r\n                  {errors.phone && errors.phone}\r\n                </label>\r\n                <Auto\r\n                  setCurrentCustomer={setCurrentCustomer}\r\n                  setCurrentSearch={setCurrentSearch}\r\n                  setCurrentStage={setCurrentStage}\r\n                  phoneSearch={phoneSearch}\r\n                  setPhoneSearch={setPhoneSearch}\r\n                />\r\n                <div className=\"content\">\r\n                  <label className=\"formError\">\r\n                    {errors.name && errors.name}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    placeholder=\"ชื่อ\"\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    value={values.name || \"\"}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <label className=\"formError\">\r\n                {errors.stage && errors.stage}\r\n              </label>\r\n              <div className=\"radio-tile-group\">\r\n                <div className=\"input-container\">\r\n                  <input\r\n                    className={\r\n                      (currentStage &&\r\n                        currentStage == \"Customer\" &&\r\n                        values.stage == \"Customer\") ||\r\n                      (currentStage &&\r\n                        currentStage == \"Expansion\" &&\r\n                        values.stage == \"Expansion\")\r\n                        ? \"radio-button disabled\"\r\n                        : \"radio-button\"\r\n                    }\r\n                    type=\"radio\"\r\n                    name=\"stage\"\r\n                    value=\"Lead\"\r\n                    checked={\r\n                      values.stage === \"Lead\" || values.stage == undefined\r\n                    }\r\n                    onChange={() => setFieldValue(\"stage\", \"Lead\")}\r\n                    disabled={\r\n                      (currentStage &&\r\n                        currentStage == \"Customer\" &&\r\n                        values.stage == \"Customer\") ||\r\n                      (currentStage &&\r\n                        currentStage == \"Expansion\" &&\r\n                        values.stage == \"Expansion\")\r\n                        ? \"disabled\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  <div className=\"radio-tile\">\r\n                    <img src={stage_lead} />\r\n                    Lead\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-container\">\r\n                  <input\r\n                    className={\r\n                      currentStage &&\r\n                      currentStage == \"Expansion\" &&\r\n                      values.stage == \"Expansion\"\r\n                        ? \"radio-button disabled\"\r\n                        : \"radio-button\"\r\n                    }\r\n                    type=\"radio\"\r\n                    name=\"stage\"\r\n                    value=\"Customer\"\r\n                    checked={values.stage === \"Customer\"}\r\n                    onChange={() => setFieldValue(\"stage\", \"Customer\")}\r\n                    disabled={\r\n                      currentStage &&\r\n                      currentStage == \"Expansion\" &&\r\n                      values.stage == \"Expansion\"\r\n                        ? \"disabled\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  <div className=\"radio-tile\">\r\n                    <img src={stage_customer} />\r\n                    Customer\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-container\">\r\n                  <input\r\n                    className={\r\n                      currentStage &&\r\n                      currentStage == \"Lead\" &&\r\n                      values.stage == \"Lead\"\r\n                        ? \"radio-button disabled\"\r\n                        : \"radio-button\"\r\n                    }\r\n                    type=\"radio\"\r\n                    name=\"stage\"\r\n                    value=\"Expansion\"\r\n                    checked={values.stage === \"Expansion\"}\r\n                    onChange={() => setFieldValue(\"stage\", \"Expansion\")}\r\n                    disabled={\r\n                      currentStage &&\r\n                      currentStage == \"Lead\" &&\r\n                      values.stage == \"Lead\"\r\n                        ? \"disabled\"\r\n                        : null\r\n                    }\r\n                  />\r\n                  <div className=\"radio-tile\">\r\n                    <img src={stage_expansion} />\r\n                    Expansion\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {values.stage == \"Lead\" || values.stage == undefined ? (\r\n                <div>\r\n                  <label className=\"formError\">\r\n                    {errors.lead_reason && errors.lead_reason}\r\n                  </label>\r\n                  <select\r\n                    name=\"lead_reason\"\r\n                    value={values.lead_reason}\r\n                    onChange={e => {\r\n                      handleChange(e);\r\n                      if (e.currentTarget.value === \"อื่นๆ\")\r\n                        setOtherReason(true);\r\n                      else setOtherReason(false);\r\n                    }}\r\n                    onBlur={handleBlur}\r\n                    style={{ display: \"block\" }}\r\n                  >\r\n                    <option value=\"\" label=\"เหตุผล\" key={\"1\"}>\r\n                      เหตุผล\r\n                    </option>\r\n                    <option value=\"ซื้อ\" label=\"ซื้อ\" key={\"2\"}>\r\n                      ซื้อ\r\n                    </option>\r\n                    <option value=\"สอบถาม\" label=\"สอบถาม\" key={\"3\"}>\r\n                      สอบถาม\r\n                    </option>\r\n                    <option value=\"ไม่เคยนำเข้า\" label=\"ไม่เคยนำเข้า\" key={\"4\"}>\r\n                      ไม่เคยนำเข้า\r\n                    </option>\r\n                    <option value=\"สินค้าหมด\" label=\"สินค้าหมด\" key={\"5\"}>\r\n                      สินค้าหมด\r\n                    </option>\r\n                    <option value=\"อื่นๆ\" label=\"อื่นๆ\" key={\"6\"}>\r\n                      อื่นๆ\r\n                    </option>\r\n                  </select>\r\n                  {otherReason && (\r\n                    <div className=\"content\">\r\n                      <label className=\"formError\">\r\n                        {errors.lead_otherReason && errors.lead_otherReason}\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"lead_otherReason\"\r\n                        placeholder=\"เหตุผลอื่นๆ\"\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        value={values.lead_otherReason || \"\"}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  <label className=\"formError\">\r\n                    {errors.lead_sales && errors.lead_sales}\r\n                  </label>\r\n                  <select\r\n                    name=\"lead_sales\"\r\n                    value={values.lead_sales}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    style={{ display: \"block\" }}\r\n                  >\r\n                    <option value=\"\" label=\"ยอดซื้อ\" key={\"1\"}>\r\n                      ยอดซื้อ\r\n                    </option>\r\n                    <option value=\"1-10,000 บาท\" label=\"1-10,000 บาท\" key={\"2\"}>\r\n                      1-10,000 บาท\r\n                    </option>\r\n                    <option\r\n                      value=\"10,001-50,000 บาท\"\r\n                      label=\"10,001-50,000 บาท\"\r\n                      key={\"3\"}\r\n                    >\r\n                      10,001-50,000 บาท\r\n                    </option>\r\n                    <option\r\n                      value=\"50,001-100,000 บาท\"\r\n                      label=\"50,001-100,000 บาท\"\r\n                      key={\"4\"}\r\n                    >\r\n                      50,001-100,000 บาท\r\n                    </option>\r\n                    <option\r\n                      value=\"100,001-300,000 บาท\"\r\n                      label=\"100,001-300,000 บาท\"\r\n                      key={\"5\"}\r\n                    >\r\n                      100,001-300,000 บาท\r\n                    </option>\r\n                    <option\r\n                      value=\"300,001-500,000 บาท\"\r\n                      label=\"300,001-500,000 บาท\"\r\n                      key={\"6\"}\r\n                    >\r\n                      300,001-500,000 บาท\r\n                    </option>\r\n                    <option\r\n                      value=\"มากกว่า 500,000 บาท\"\r\n                      label=\"มากกว่า 500,000 บาท\"\r\n                      key={\"7\"}\r\n                    >\r\n                      มากกว่า 500,000 บาท\r\n                    </option>\r\n                  </select>\r\n                  <label className=\"formError\">\r\n                    {errors.lead_category && errors.lead_category}\r\n                  </label>\r\n                  <div className=\"checkbox-tile-group\">\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"จักรยาน\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">จักรยาน</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"เฟรมจักรยาน\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">เฟรมจักรยาน</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"ส่วนประกอบ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">ส่วนประกอบ</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"เครื่องแต่งกาย\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">เครื่องแต่งกาย</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"อุปกรณ์ตกแต่ง\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">อุปกรณ์ตกแต่ง </div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"สมาร์ทวอทช์\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">สมาร์ทวอทช์</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"บริการ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">บริการ</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"lead_category\"\r\n                        value=\"อื่นๆ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">อื่นๆ</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {values.stage == \"Customer\" || values.stage == \"Expansion\" ? (\r\n                <div>\r\n                  <label className=\"formError\">\r\n                    {errors.customer_so && errors.customer_so}\r\n                  </label>\r\n                  <div className=\"content\">\r\n                    <label>\r\n                      <label className=\"formError\" />\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"customer_so\"\r\n                      placeholder=\"หมายเลข Receipt\"\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                      value={values.customer_so}\r\n                    />\r\n                  </div>\r\n                  <label className=\"formError\">\r\n                    {errors.customer_sales && errors.customer_sales}\r\n                  </label>\r\n                  <div className=\"content\">\r\n                    <label>\r\n                      <label className=\"formError\" />\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"customer_sales\"\r\n                      placeholder=\"ยอดซื้อ\"\r\n                      onChange={handleChange}\r\n                      onBlur={handleBlur}\r\n                      value={numberWithCommas(values.customer_sales)}\r\n                    />\r\n                  </div>\r\n                  <label className=\"formError\">\r\n                    {errors.customer_category && errors.customer_category}\r\n                  </label>\r\n                  <div className=\"checkbox-tile-group\">\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"จักรยาน\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">จักรยาน</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"เฟรมจักรยาน\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">เฟรมจักรยาน</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"ส่วนประกอบ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">ส่วนประกอบ</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"เครื่องแต่งกาย\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">เครื่องแต่งกาย</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"อุปกรณ์ตกแต่ง\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">อุปกรณ์ตกแต่ง </div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"สมาร์ทวอทช์\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">สมาร์ทวอทช์</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"บริการ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">บริการ</div>\r\n                    </div>\r\n                    <div className=\"input-checkbox-container\">\r\n                      <Field\r\n                        type=\"checkbox\"\r\n                        className=\"checkbox-button\"\r\n                        name=\"customer_category\"\r\n                        value=\"อื่นๆ\"\r\n                      />\r\n                      <div className=\"checkbox-tile\">อื่นๆ</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              <label className=\"formError\">\r\n                {errors.sale_branch && errors.sale_branch}\r\n              </label>\r\n              <select\r\n                name=\"sale_branch\"\r\n                value={values.sale_branch || \"\"}\r\n                onChange={e => {\r\n                  handleChange(e);\r\n                  setSelectedBranch(\r\n                    branches.find(x => x.name === e.currentTarget.value)\r\n                  );\r\n                }}\r\n                onBlur={handleBlur}\r\n                style={{ display: \"block\" }}\r\n              >\r\n                <option value=\"\" label=\"สาขา\">\r\n                  สาขา\r\n                </option>\r\n                {branches &&\r\n                  branches.map((branch, index) => (\r\n                    <option value={branch.name} label={branch.name} key={index}>\r\n                      {branch.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n              <label className=\"formError\">\r\n                {errors.sale_person && errors.sale_person}\r\n              </label>\r\n              {selectedBranch && (\r\n                <select\r\n                  name=\"sale_person\"\r\n                  value={values.sale_person || \"\"}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  style={{ display: \"block\" }}\r\n                >\r\n                  <option value=\"\" label=\"ชื่อเซล\">\r\n                    ชื่อเซล\r\n                  </option>\r\n                  {selectedBranch &&\r\n                    selectedBranch.sale.map((sale, index) => (\r\n                      <option value={sale} label={sale} key={index}>\r\n                        {sale}\r\n                      </option>\r\n                    ))}\r\n                </select>\r\n              )}\r\n              <label className=\"formError\">\r\n                {errors.channel && errors.channel}\r\n              </label>\r\n              <div className=\"radio-tile-group\">\r\n                <div className=\"input-container-channel\">\r\n                  <input\r\n                    className=\"radio-button\"\r\n                    type=\"radio\"\r\n                    name=\"channel\"\r\n                    value=\"offline\"\r\n                    checked={\r\n                      values.channel === \"offline\" ||\r\n                      values.channel == undefined\r\n                    }\r\n                    onChange={() => setFieldValue(\"channel\", \"offline\")}\r\n                  />\r\n                  <div className=\"radio-tile\">\r\n                    <img src={channel_offline} />\r\n                    Offline\r\n                  </div>\r\n                </div>\r\n                <div className=\"input-container-channel\">\r\n                  <input\r\n                    className=\"radio-button\"\r\n                    type=\"radio\"\r\n                    name=\"channel\"\r\n                    value=\"online\"\r\n                    checked={values.channel === \"online\"}\r\n                    onChange={() => setFieldValue(\"channel\", \"online\")}\r\n                  />\r\n                  <div className=\"radio-tile\">\r\n                    <img src={channel_online} />\r\n                    Online\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"actionButton\">\r\n                <button\r\n                  className=\"mainButton\"\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {currentCustomer ? \"อัพเดท\" : \"เพิ่ม\"}\r\n                </button>\r\n                <button\r\n                  type=\"reset\"\r\n                  className=\"resetButton\"\r\n                  onClick={() => {\r\n                    setCurrentCustomer();\r\n                    setPhoneSearch(\"\");\r\n                    setCurrentStage();\r\n                    resetForm();\r\n                  }}\r\n                >\r\n                  ล้างค่า\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n      <Navbar active={\"กรอกข้อมูล\"} />\r\n    </>\r\n  );\r\n}\r\n\r\nconst Auto = props => {\r\n  const { customerList } = useFirestore();\r\n  const [display, setDisplay] = useState(false);\r\n  const [options, setOptions] = useState();\r\n\r\n  useEffect(async () => {\r\n    setOptions(customerList);\r\n  }, [customerList]);\r\n\r\n  useEffect(async () => {\r\n    //console.log(props.phoneSearch);\r\n    let result = objectSearch(props.phoneSearch, options);\r\n    if (result != -1) {\r\n      props.setCurrentSearch(result.phone);\r\n      props.setCurrentCustomer(result);\r\n    } else {\r\n      props.setCurrentStage();\r\n    }\r\n  }, [props.phoneSearch]);\r\n\r\n  function objectSearch(nameKey, myArray) {\r\n    if (nameKey.length == 0 || myArray.length == 0) return -1;\r\n    for (var i = 0; i < myArray.length; i++) {\r\n      if (myArray[i].phone === nameKey) {\r\n        return myArray[i];\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  const selectAuto = option => {\r\n    props.setPhoneSearch(option.phone);\r\n    props.setCurrentSearch(option.phone);\r\n    props.setCurrentCustomer(option);\r\n    switch (option.stage) {\r\n      case \"Lead\":\r\n        props.setCurrentStage(\"Customer\");\r\n        break;\r\n      case \"Customer\":\r\n        props.setCurrentStage(\"Expansion\");\r\n        break;\r\n      case \"Expansion\":\r\n        props.setCurrentStage(\"Expansion\");\r\n        break;\r\n      default:\r\n        props.setCurrentStage(\"Lead\");\r\n    }\r\n    setDisplay(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"autocomplete-holder\">\r\n      <input\r\n        onBlur={props.handleBlur}\r\n        onClick={() => {\r\n          setDisplay(!display);\r\n        }}\r\n        value={props.phoneSearch}\r\n        onChange={event => {\r\n          //props.handleChange;\r\n          props.setCurrentSearch(event.target.value);\r\n          if (event.target.value != \"\") setDisplay(true);\r\n          else setDisplay(false);\r\n          props.setPhoneSearch(event.target.value);\r\n        }}\r\n        placeholder=\"เบอร์โทรศัพท์\"\r\n      />\r\n      <div className={\"autocomplete\"}>\r\n        {display &&\r\n          options &&\r\n          options\r\n            .filter(\r\n              option =>\r\n                option.phone &&\r\n                option.phone\r\n                  .toLowerCase()\r\n                  .indexOf(props.phoneSearch.toLowerCase()) > -1\r\n            )\r\n            .slice(0, 5)\r\n            .map((option, index) => {\r\n              return (\r\n                <div\r\n                  className={\"autocomplete-item\"}\r\n                  key={index}\r\n                  onClick={() => {\r\n                    selectAuto(option);\r\n                  }}\r\n                >\r\n                  <div className=\"phone\">{option.phone}</div>\r\n                  <div className=\"minor\">\r\n                    {option.name} - {option.stage}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useFirestore } from \"./Firestore.js\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport logo from \"../img/header_logo.svg\";\r\nimport moment from \"moment\";\r\n\r\nimport \"react-date-range/dist/styles.css\"; // main style file\r\nimport \"react-date-range/dist/theme/default.css\"; // theme css file\r\nimport { DateRange } from \"react-date-range\";\r\n\r\nexport default function ViewPage() {\r\n  const { customerList } = useFirestore();\r\n  const [filterList, setFilterList] = useState();\r\n  const [currentCustomer, setCurrentCustomer] = useState();\r\n  const [currentSearch, setCurrentSearch] = useState(\"\");\r\n  const [initialForm, setInitialForm] = useState();\r\n  const [error, setError] = useState();\r\n  const [success, setSuccess] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPicker, setShowPicker] = useState(false);\r\n\r\n  const [selectedDate, setSelectedDate] = useState([\r\n    {\r\n      startDate: new Date(),\r\n      endDate: new Date(),\r\n      key: \"selection\"\r\n    }\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"header\">\r\n        <img src={logo} className=\"logo\" />\r\n      </div>\r\n      <div className=\"header-greeting\">\r\n        <h1>CRM </h1>\r\n        <div>สวัสดี, SPORT FOR LIFE</div>\r\n      </div>\r\n\r\n      <div>\r\n        <button\r\n          onClick={() => setShowPicker(!showPicker)}\r\n          className={\"showDate\"}\r\n        >\r\n          เลือกวันที่\r\n        </button>\r\n        <button onClick={() => setFilterList()} className={\"resetDate\"}>\r\n          ล้างค่า\r\n        </button>\r\n        {/*\r\n        <div style={{ marginLeft: \"25px\" }}>\r\n          {selectedDate && moment(selectedDate.startDate).format(\"DD/MM/YYYY\")}{\" \"}\r\n          - {selectedDate && moment(selectedDate.endDate).format(\"DD/MM/YYYY\")}\r\n        </div>\r\n        */}\r\n        {showPicker && (\r\n          <div style={{ position: \"relative\" }}>\r\n            <DateRange\r\n              editableDateInputs={true}\r\n              onChange={item => {\r\n                setSelectedDate([item.selection]);\r\n                //console.log(item.selection);\r\n                let startDate = moment(item.selection.startDate).unix();\r\n                let endDate = moment(item.selection.endDate)\r\n                  .add(1, \"days\")\r\n                  .unix();\r\n\r\n                /*console.log(\r\n                  \"start \",\r\n                  moment.unix(startDate).format(\"DD/MM/YYYY HH:mm:ss\")\r\n                );\r\n                console.log(\r\n                  \"end \",\r\n                  moment.unix(endDate).format(\"DD/MM/YYYY HH:mm:ss\")\r\n                );\r\n                */\r\n                customerList.map(customer => {\r\n                  //console.log(\"DATE \", customer.dt);\r\n                });\r\n                setFilterList(\r\n                  customerList.filter(customer => {\r\n                    return startDate <= customer.dt && customer.dt <= endDate;\r\n                  })\r\n                );\r\n              }}\r\n              moveRangeOnFirstSelection={false}\r\n              ranges={selectedDate}\r\n              className={\"myPicker\"}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className={\"responsive\"}>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th rowspan=\"2\">#</th>\r\n              <th rowspan=\"2\">ชื่อลูกค้า</th>\r\n              <th rowspan=\"2\">โทรศัพท์</th>\r\n              <th rowspan=\"2\">สถานะ</th>\r\n              <th colspan=\"4\">Lead</th>\r\n              <th colspan=\"5\">Customer</th>\r\n              <th colspan=\"5\">Expansion</th>\r\n              <th rowspan=\"2\">เพิ่มเมื่อ</th>\r\n              <th rowspan=\"2\">อัพเดทล่าสุด</th>\r\n              <th rowspan=\"2\">ลบ</th>\r\n              <th rowspan=\"2\">แก้ไข</th>\r\n            </tr>\r\n            <tr>\r\n              <th>ยอดคาดหวัง</th>\r\n              <th>สาขา</th>\r\n              <th>Sale</th>\r\n              <th>ช่องทาง</th>\r\n              <th>ยอด</th>\r\n              <th>หมวดหมู่</th>\r\n              <th>สาขา</th>\r\n              <th>Sale</th>\r\n              <th>ช่องทาง</th>\r\n              <th>ยอด</th>\r\n              <th>หมวดหมู่</th>\r\n              <th>สาขา</th>\r\n              <th>Sale</th>\r\n              <th>ช่องทาง</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filterList\r\n              ? filterList.map((item, index) => (\r\n                  <tr key={index}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{item.name && item.name}</td>\r\n                    <td>{item.phone && item.phone}</td>\r\n                    <td>{item.stage && item.stage}</td>\r\n                    <td>{item.lead_sales && item.lead_sales}</td>\r\n                    <td>{item.sale_branch && item.sale_branch}</td>\r\n                    <td>{item.sale_person && item.sale_person}</td>\r\n                    <td>\r\n                      {item.dt &&\r\n                        moment.unix(item.dt).format(\"DD/MM/YYYY HH:mm:ss\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.dt_lastupdate &&\r\n                        moment\r\n                          .unix(item.dt_lastupdate)\r\n                          .format(\"DD/MM/YYYY HH:mm:ss\")}\r\n                    </td>\r\n                    <td>\r\n                      <a>ลบ</a>\r\n                    </td>\r\n                    <td>\r\n                      <a>แก้ไข</a>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              : customerList &&\r\n                customerList.map((item, index) => (\r\n                  <tr key={index}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{item.name && item.name}</td>\r\n                    <td>{item.phone && item.phone}</td>\r\n                    <td>{item.stage && item.stage}</td>\r\n                    <td>{item.lead_sales && item.lead_sales}</td>\r\n                    <td>{item.sale_branch && item.sale_branch}</td>\r\n                    <td>{item.sale_person && item.sale_person}</td>\r\n                    <td>{item.channel && item.channel}</td>\r\n                    <td>\r\n                      {item.customer_transactions ? (item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index == 0 && <div>{item.customer_sales}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr], \"\")) : \"-\"}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index == 0 && (\r\n                                <div>{item.customer_category.join(\",\")}</div>\r\n                              )\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr], \"\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index == 0 && <div>{item.sale_branch}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr], \"\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index == 0 && <div>{item.sale_person}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr], \"\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index == 0 && <div>{item.channel}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr], \"\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index > 0 && <div>{item.customer_sales}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr])}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index > 0 && (\r\n                                <div>{item.customer_category.join(\",\")}</div>\r\n                              )\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr])}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index > 0 && <div>{item.sale_branch}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr])}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index > 0 && <div>{item.sale_person}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr])}\r\n                    </td>\r\n                    <td>\r\n                      {item.customer_transactions &&\r\n                        item.customer_transactions.length > 0 &&\r\n                        item.customer_transactions\r\n                          .map(\r\n                            (item, my_index) =>\r\n                              my_index > 0 && <div>{item.channel}</div>\r\n                          )\r\n                          .reduce((prev, curr) => [prev, \"\", curr])}\r\n                    </td>\r\n                    <td>\r\n                      {item.dt &&\r\n                        moment.unix(item.dt).format(\"DD/MM/YYYY HH:mm:ss\")}\r\n                    </td>\r\n                    <td>\r\n                      {item.dt_lastupdate &&\r\n                        moment\r\n                          .unix(item.dt_lastupdate)\r\n                          .format(\"DD/MM/YYYY HH:mm:ss\")}\r\n                    </td>\r\n                    <td>\r\n                      <a>ลบ</a>\r\n                    </td>\r\n                    <td>\r\n                      <a>แก้ไข</a>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <Navbar active={\"ดูข้อมูล\"} />\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ResponsiveFunnel } from '@nivo/funnel'\r\nimport { ResponsivePie } from '@nivo/pie'\r\nimport { ResponsiveBar } from '@nivo/bar'\r\nimport { ResponsiveLine } from '@nivo/line'\r\nimport { Line,Doughnut  } from 'react-chartjs-2';\r\nimport Navbar from \"../components/Navbar\";\r\nimport logo from \"../img/header_logo.svg\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik } from \"formik\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nimport LoadingBar from \"../components/LoadingBar\";\r\nimport SuccessBar from \"../components/SuccessBar\";\r\nimport ErrorBar from \"../components/ErrorBar\";\r\n\r\nimport { useFirestore } from \"./Firestore.js\";\r\nimport moment from \"moment\";\r\n\r\nimport ReactToPdf from \"react-to-pdf\";\r\n\r\nexport default function Dashboard() {\r\n  const ref = React.createRef();\r\n  const { targetList, customerList, forecastList, reportList, updateForecast, updateReport } = useFirestore();\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [initialForm, setInitialForm] = useState();\r\n  const formValidation = Yup.object().shape({\r\n  });\r\n\r\n  useEffect(async() => {\r\n    setInitialForm({\r\n      sales : forecastList !== undefined && forecastList[\"2021-\"+moment().week()].sales,\r\n      customers : forecastList !== undefined && forecastList[\"2021-\"+moment().week()].customers,\r\n      section1: reportList && reportList[\"2021-22\"].section1,\r\n      section2: reportList && reportList[\"2021-22\"].section2,\r\n      section3: reportList && reportList[\"2021-22\"].section3,\r\n      section4: reportList && reportList[\"2021-22\"].section4,\r\n      section5: reportList && reportList[\"2021-22\"].section5,\r\n      section6: reportList && reportList[\"2021-22\"].section6,\r\n      section7: reportList && reportList[\"2021-22\"].section7,\r\n      section8: reportList && reportList[\"2021-22\"].section8,\r\n      section9: reportList && reportList[\"2021-22\"].section9,\r\n      section10: reportList && reportList[\"2021-22\"].section10,\r\n      section11: reportList && reportList[\"2021-22\"].section11,\r\n      section12: reportList && reportList[\"2021-22\"].section12,\r\n      section13: reportList && reportList[\"2021-22\"].section13,\r\n    });\r\n  }, [forecastList, reportList])\r\n\r\n  const [weeksInMonth, setWeeksInMonth] = [];\r\n  const [numberOfWeek, setNumberOfWeek] = useState(()=> {\r\n    let weeks = [];\r\n    for(var i = 1; i <= moment().week(); i++){\r\n      weeks.push(i);\r\n    }\r\n    return weeks;\r\n  });\r\n  const [selectedWeek, setSelectedWeek] = useState(moment().week())\r\n\r\n  const [branch, setBranch] = useState(\"ALL\");\r\n  const [duration, setDuration] = useState(\"YEAR\");\r\n\r\n  const [transactions, setTransactions] = useState([]);\r\n\r\n  const [statSales, setStatSales] = useState(0);\r\n  const [statTargetSales, setStatTargetSales] = useState(0);\r\n  const [statLWSales, setStatLWSales] = useState(0);\r\n\r\n  const [statLeads, setStatLeads] = useState(0);\r\n  const [statLWLeads, setStatLWLeads] = useState(0);\r\n  const [statCustomers, setStatCustomers] = useState(0);\r\n  const [statLWCustomers, setStatLWCustomers] = useState(0);\r\n  const [statExpansions, setStatExpansions] = useState(0);\r\n  const [statLWExpansions, setStatLWExpansions] = useState(0);\r\n  const [statLosts, setStatLosts] = useState(0);\r\n  const [statLWLosts, setStatLWLosts] = useState(0);\r\n\r\n  const [statLeadsUCL, setStatLeadsUCL] = useState(0);\r\n  const [statLeadsPTK, setStatLeadsPTK] = useState(0);\r\n  const [statLeadsLKB, setStatLeadsLKB] = useState(0);\r\n  const [statCustomersUCL, setStatCustomersUCL] = useState(0);\r\n  const [statCustomersPTK, setStatCustomersPTK] = useState(0);\r\n  const [statCustomersLKB, setStatCustomersLKB] = useState(0);\r\n  const [statExpansionsUCL, setStatExpansionsUCL] = useState(0);\r\n  const [statExpansionsPTK, setStatExpansionsPTK] = useState(0);\r\n  const [statExpansionsLKB, setStatExpansionsLKB] = useState(0);\r\n\r\n  const [branchPerformance, setBranchPerformace] = useState([]);\r\n  const [periodSales, setPeriodSales] = useState([]);\r\n  const [periodTargetSales, setPeriodTargetSales] = useState([]);\r\n  const [periodUCLSales, setPeriodUCLSales] = useState([]);\r\n  const [periodPTKSales, setPeriodPTKSales] = useState([]);\r\n  const [periodLKBSales, setPeriodLKBSales] = useState([]);\r\n\r\n  const [sumUCLSales, setSumUCLSales] = useState(0);\r\n  const [sumPTKSales, setSumPTKSales] = useState(0);\r\n  const [sumLKBSales, setSumLKBSales] = useState(0);\r\n\r\n  const [lostsReason, setLostReasons] = useState([]);\r\n  const [categorySales, setCategorySales] = useState([]);\r\n\r\n  const [topSpender, setTopSpender] = useState([]);\r\n\r\n  const [channelUCLOnline, setChannelUCLOnline] = useState(0);\r\n  const [channelUCLOffline, setChannelUCLOffline] = useState(0);\r\n  const [channelPTKOnline, setChannelPTKOnline] = useState(0);\r\n  const [channelPTKOffline, setChannelPTKOffline] = useState(0);\r\n  const [channelLKBOnline, setChannelLKBOnline] = useState(0);\r\n  const [channelLKBOffline, setChannelLKBOffline] = useState(0);\r\n\r\n  const [targetSalesUCL, setTargetSalesUCL] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\r\n  const [targetSalesPTK, setTargetSalesPTK] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\r\n  const [targetSalesLKB, setTargetSalesLKB] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\r\n\r\n  useEffect(async () => {\r\n    setTargetSalesUCL(targetList && targetList.hasOwnProperty(\"ucl\") ? targetList.ucl[\"2021\"] : [])\r\n    setTargetSalesLKB(targetList && targetList.hasOwnProperty(\"lkb\") ? targetList.lkb[\"2021\"] : [])\r\n    setTargetSalesPTK(targetList && targetList.hasOwnProperty(\"ptk\") ? targetList.ptk[\"2021\"] : [])\r\n  }, [targetList])\r\n\r\n  useEffect(async () => {\r\n    let all_transactions = [];\r\n\r\n    let _statLeads = 0;\r\n    let _statCustomers = 0;\r\n    let _statExpansions = 0;\r\n    let _statLosts = 0;\r\n\r\n    let _statLWLeads = 0;\r\n    let _statLWCustomers = 0;\r\n    let _statLWExpansions = 0;\r\n    let _statLWLosts = 0;\r\n\r\n    let _statLeadsUCL = 0;\r\n    let _statLeadsPTK = 0;\r\n    let _statLeadsLKB = 0;\r\n\r\n    let _statCustomersUCL = 0;\r\n    let _statCustomersPTK = 0;\r\n    let _statCustomersLKB = 0;\r\n\r\n    let _statExpansionsUCL = 0;\r\n    let _statExpansionsPTK = 0;\r\n    let _statExpansionsLKB = 0;\r\n\r\n    let _channelUCLOnline = 0;\r\n    let _channelUCLOffline = 0;\r\n    let _channelPTKOnline = 0;\r\n    let _channelPTKOffline = 0;\r\n    let _channelLKBOnline = 0;\r\n    let _channelLKBOffline = 0;\r\n\r\n    let _lostsReason = [];\r\n    let _categorySales = [];\r\n\r\n    let _topSpender = [];\r\n\r\n    let _branchPerformance = [];\r\n\r\n    let today = moment();\r\n\r\n    if(customerList) {\r\n      _statLeads = customerList.length;\r\n      _statLWLeads = customerList.filter(function (el) {\r\n        return moment.unix(el.dt).week() <= today.week()-1\r\n      }).length;\r\n\r\n      _statLWCustomers = customerList.filter(function (el) {\r\n        return moment.unix(el.dt).week() <= today.week()-1 && el.stage == \"Customer\"\r\n      }).length;\r\n\r\n      _statLWExpansions = customerList.filter(function (el) {\r\n        return moment.unix(el.dt).week() <= today.week()-1 && el.stage == \"Expansion\"\r\n      }).length;\r\n\r\n      setStatLWLeads(_statLWLeads - _statLWCustomers);\r\n      setStatLWCustomers(_statLWCustomers + _statLWExpansions);\r\n      setStatLWExpansions(_statLWExpansions);\r\n      setStatLWLosts(0);\r\n\r\n      for (let i = 0; i < customerList.length; i++) {\r\n        let customer = customerList[i];\r\n\r\n        if(customer.hasOwnProperty('lead_category')) {\r\n          if(customer.lead_category != \"\") {\r\n            let index = _categorySales.findIndex(x => x.id == customer.lead_category);\r\n            if(index >= 0) _categorySales[index].value+=1\r\n            else _categorySales.push({id: customer.lead_category, label: customer.lead_category, value: 1})\r\n          }\r\n        }\r\n      \r\n        if(customer.hasOwnProperty('lead_reason')) {\r\n          if(customer.lead_reason != \"\") {\r\n            let index = _lostsReason.findIndex(x => x.id == customer.lead_reason);\r\n            if(index >= 0) _lostsReason[index].value+=1\r\n            else _lostsReason.push({id: customer.lead_reason, label: customer.lead_reason, value: 1})\r\n          }\r\n        }\r\n\r\n        if(customer.hasOwnProperty('stage')) {\r\n          if(duration == \"YEAR\") {\r\n            if(moment.unix(customer.dt).format('YYYY') == today.format('YYYY')) {\r\n              if(customer.sale_branch == \"พระรามสี่\") {\r\n                _statLeadsUCL += 1;\r\n                if(customer.channel == \"online\") _channelUCLOnline += 1;\r\n                else if(customer.channel == \"offline\") _channelUCLOffline += 1;\r\n              }\r\n              else if(customer.sale_branch == \"พัฒนาการ\") {\r\n                _statLeadsPTK += 1;\r\n                if(customer.channel == \"online\") _channelPTKOnline += 1;\r\n                else if(customer.channel == \"offline\") _channelPTKOffline += 1;\r\n              }\r\n              else if(customer.sale_branch == \"ลาดกระบัง\") {\r\n                _statLeadsLKB += 1;\r\n                if(customer.channel == \"online\") _channelLKBOnline += 1;\r\n                else if(customer.channel == \"offline\") _channelLKBOffline += 1;\r\n              }\r\n              if(customer.stage == \"Customer\") {\r\n                _statCustomers+= 1;\r\n                if(customer.sale_branch == \"พระรามสี่\") _statCustomersUCL += 1;\r\n                else if(customer.sale_branch == \"พัฒนาการ\") _statCustomersPTK += 1;\r\n                else if(customer.sale_branch == \"ลาดกระบัง\") _statCustomersLKB += 1;\r\n              }\r\n              if(customer.stage == \"Expansion\") {\r\n                _statExpansions += 1;\r\n                if(customer.sale_branch == \"พระรามสี่\") _statExpansionsUCL += 1;\r\n                else if(customer.sale_branch == \"พัฒนาการ\") _statExpansionsPTK += 1;\r\n                else if(customer.sale_branch == \"ลาดกระบัง\") _statExpansionsLKB += 1;\r\n              }\r\n            }\r\n          } else if (duration == \"MONTH\"){\r\n            if(moment.unix(customer.dt).format('M') == today.format('M')) {\r\n              if(customer.stage == \"Customer\") _statCustomers+= 1;\r\n              if(customer.stage == \"Expansion\") _statExpansions += 1;\r\n            }\r\n          }\r\n        }\r\n        _statLosts = _statLeads - _statCustomers;\r\n        setStatLeads(_statLeads);\r\n        setStatCustomers(_statCustomers + _statExpansions);\r\n        setStatExpansions(_statExpansions);\r\n        setStatLosts(_statLosts);\r\n\r\n        setStatLeadsUCL(_statLeadsUCL);\r\n        setStatLeadsPTK(_statLeadsPTK);\r\n        setStatLeadsLKB(_statLeadsLKB);\r\n\r\n        setStatCustomersUCL(_statCustomersUCL + _statExpansionsUCL);\r\n        setStatCustomersPTK(_statCustomersPTK + _statExpansionsPTK);\r\n        setStatCustomersLKB(_statCustomersLKB + _statExpansionsLKB);\r\n\r\n        setStatExpansionsUCL(_statExpansionsUCL);\r\n        setStatExpansionsPTK(_statExpansionsPTK);\r\n        setStatExpansionsLKB(_statExpansionsLKB);\r\n\r\n        setChannelUCLOnline(_channelUCLOnline);\r\n        setChannelUCLOffline(_channelUCLOffline);\r\n        setChannelPTKOnline(_channelPTKOnline);\r\n        setChannelPTKOffline(_channelPTKOffline);\r\n        setChannelLKBOnline(_channelLKBOnline);\r\n        setChannelLKBOffline(_channelLKBOffline);\r\n\r\n        setLostReasons(_lostsReason);\r\n        setCategorySales(_categorySales);\r\n\r\n        let mySum = 0;\r\n        if(customer.hasOwnProperty('customer_transactions')) {\r\n          let trans = customer.customer_transactions;\r\n          for (let j = 0; j < trans.length; j++) {\r\n            let item = trans[j];\r\n            let tran = {\r\n              myref: customer.myref,\r\n              customer_sales : item.hasOwnProperty('customer_sales') ? parseInt(item.customer_sales) : 0,\r\n              channel : item.channel,\r\n              sale_dt : item.dt,\r\n              sale_wk : moment.unix(item.dt).week(),\r\n              sale_month : moment.unix(item.dt).format('M'),\r\n              sale_year : moment.unix(item.dt).format('YYYY'),\r\n              sale_branch : item.sale_branch,\r\n              name : customer.name,\r\n              register_branch : customer.sale_branch,\r\n              stage : customer.stage,\r\n              channel : customer.channel\r\n            }\r\n            all_transactions.push(tran);\r\n            mySum += tran.customer_sales;\r\n          }\r\n        }\r\n        let myCustomer = {\r\n          name: customer.name,\r\n          customer_sales: mySum,\r\n          sale_branch: customer.sale_branch\r\n        }\r\n        if(mySum > 0) _topSpender.push(myCustomer);\r\n      }\r\n  }\r\n  _topSpender.sort((a,b) => (a.customer_sales > b.customer_sales) ? -1 : ((b.customer_sales > a.customer_sales) ? 1 : 0))\r\n  setTopSpender(_topSpender)\r\n  setTransactions(all_transactions);\r\n  }, [customerList]);\r\n  \r\n  useEffect(async () => {\r\n    let _statSales = 0;\r\n    let _statTargetSales = 0;\r\n    let _statLWSales = 0;\r\n\r\n    let _periodSales = []\r\n    let _periodTargetSales = []\r\n    let _periodUCLSales = []\r\n    let _periodPTKSales = []\r\n    let _periodLKBSales = []\r\n    let _AllBranchPeriodSales = []\r\n    if(duration == \"YEAR\") {\r\n      _periodSales = [0,0,0,0,0,0,0,0,0,0,0,0]\r\n      _AllBranchPeriodSales = [targetSalesUCL, targetSalesLKB, targetSalesPTK]\r\n      _periodTargetSales = _AllBranchPeriodSales.reduce((r, a) => a.map((b, i) => (r[i] || 0) + b), []);\r\n      //_periodTargetSales = [40000,40000,45000,44000,55000,50000,60000,55000,55000,53000,48000,50000]\r\n      _periodUCLSales = [0,0,0,0,0,0,0,0,0,0,0,0]\r\n      _periodPTKSales = [0,0,0,0,0,0,0,0,0,0,0,0]\r\n      _periodLKBSales = [0,0,0,0,0,0,0,0,0,0,0,0]\r\n    } else if(duration == \"MONTH\") {\r\n      _periodSales = [0,0,0,0,0]\r\n      _periodSales = [0,0,0,0,0]\r\n      _periodTargetSales = [0,0,0,0,0]\r\n      _periodUCLSales = [0,0,0,0,0]\r\n      _periodPTKSales = [0,0,0,0,0]\r\n      _periodLKBSales = [0,0,0,0,0]\r\n    }\r\n\r\n    let today = moment();\r\n    for(let i=0; i < transactions.length; i++) {\r\n      let tran = transactions[i];\r\n      if(duration == \"YEAR\") {\r\n        if(tran.sale_year == today.format('YYYY')) {\r\n          _statSales += parseInt(tran.customer_sales);\r\n          _periodSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n          if(tran.sale_branch == \"พระรามสี่\") _periodUCLSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n          else if(tran.sale_branch == \"พัฒนาการ\") _periodPTKSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n          else if(tran.sale_branch == \"ลาดกระบัง\") _periodLKBSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n        }\r\n      } else if (duration == \"MONTH\"){\r\n        if(tran.sale_month == today.format('M')) {\r\n          _statSales += parseInt(tran.customer_sales);\r\n          //_periodSales[tran.sale_month -1] = tran.customer_sales;\r\n          if(tran.sale_branch == \"พระรามสี่\") _periodUCLSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n          else if(tran.sale_branch == \"พัฒนาการ\") _periodPTKSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n          else if(tran.sale_branch == \"ลาดกระบัง\") _periodLKBSales[tran.sale_month -1] += parseInt(tran.customer_sales);\r\n        }\r\n      }\r\n\r\n      if(tran.sale_week < today.week()) _statLWSales += parseInt(tran.customer_sales);\r\n    }\r\n\r\n    var _sumUCLSales = _periodUCLSales.reduce(function(a, b){\r\n      return a + b;\r\n    }, 0);\r\n    var _sumPTKSales = _periodPTKSales.reduce(function(a, b){\r\n      return a + b;\r\n    }, 0);\r\n    var _sumLKBSales = _periodLKBSales.reduce(function(a, b){\r\n      return a + b;\r\n    }, 0);\r\n\r\n    setSumUCLSales(_sumUCLSales);\r\n    setSumPTKSales(_sumPTKSales);\r\n    setSumLKBSales(_sumLKBSales);\r\n\r\n    setStatSales(_statSales);\r\n    setStatLWSales(_statLWSales);\r\n    setPeriodSales(_periodSales);\r\n    setPeriodTargetSales(_periodTargetSales);\r\n    setPeriodUCLSales(_periodUCLSales);\r\n    setPeriodPTKSales(_periodPTKSales);\r\n    setPeriodLKBSales(_periodLKBSales);\r\n  }, [transactions, duration, branch]);\r\n\r\n  console.log(\"Customer list\",customerList);\r\n  console.log(\"Transaction list\",transactions);\r\n  console.log(\"Forecast list\", forecastList);\r\n  console.log(\"Report list\", reportList);\r\n  console.log(\"Target list\", targetList);\r\n\r\n  const leadConversionBySourceData = [\r\n    {\r\n      \"สาขา\": \"UCL\",\r\n      \"Online\": channelUCLOnline,\r\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\r\n      \"Offline\": channelUCLOffline,\r\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\r\n    },\r\n    {\r\n      \"สาขา\": \"PTK\",\r\n      \"Online\": channelPTKOnline,\r\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\r\n      \"Offline\": channelPTKOffline,\r\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\r\n    },\r\n    {\r\n      \"สาขา\": \"LKB\",\r\n      \"Online\": channelLKBOnline,\r\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\r\n      \"Offline\": channelLKBOffline,\r\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\r\n    },\r\n  ]\r\n\r\n  const salesFunnelByBranch = [\r\n    {\r\n      \"สถานะ\": \"Leads\",\r\n      \"UCL\": statLeadsUCL,\r\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\r\n      \"PTK\": statLeadsPTK,\r\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\r\n      \"LKB\": statLeadsLKB,\r\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\r\n    },\r\n    {\r\n      \"สถานะ\": \"Customers\",\r\n      \"UCL\": statCustomersUCL,\r\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\r\n      \"PTK\": statCustomersPTK,\r\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\r\n      \"LKB\": statCustomersLKB,\r\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\r\n    },\r\n    {\r\n      \"สถานะ\": \"Expansions\",\r\n      \"UCL\": statExpansionsUCL,\r\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\r\n      \"PTK\": statExpansionsPTK,\r\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\r\n      \"LKB\": statExpansionsLKB,\r\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\r\n    },\r\n  ]\r\n\r\n  function formatted(input) {\r\n    return input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n  function formattedSign(input, text=\"\") {\r\n    if(input >= 0) return <label className=\"positive\">{\"+\" + input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + text}</label>;\r\n    else return <label className=\"negative\">{\"-\" + input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + text}</label>;\r\n  }\r\n\r\n  function formattedDec(input, text) {\r\n    if(input >= 0) return <label className=\"positive\">{\"+\" + input.toFixed(2) + text}</label>;\r\n    else return <label className=\"negative\">{\"-\" + input.toFixed(2) + text}</label>;\r\n  }\r\n\r\n  function yearTransaction(year) {\r\n    return transactions.filter(function(transaction) {\r\n      return transaction.year == year && transaction.stage == \"Customer\"\r\n    });\r\n  }\r\n\r\n  function monthTransaction(month) {\r\n    return transactions.filter(function(transaction) {\r\n      return transaction.month == month && transaction.stage == \"Customer\"\r\n    });\r\n  }\r\n\r\n  function weekTransaction(week) {\r\n    return transactions.filter(function(transaction) {\r\n      return transaction.week == week  && transaction.stage == \"Customer\"\r\n    });\r\n  }\r\n\r\n  function sum(array ,key) {\r\n    return targetList !== undefined ? array.reduce((a, b) => a + (parseInt(b[key]) || 0), 0) : 0 ;\r\n  }\r\n\r\n  function week(year, month_number) {\r\n    var firstOfMonth = new Date(year, month_number-1, 1);\r\n    var lastOfMonth = new Date(year, month_number, 0);\r\n    var used = firstOfMonth.getDay() + lastOfMonth.getDate();\r\n    return Math.ceil( used / 7);\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {loading && <LoadingBar />}\r\n      {success && <SuccessBar setSuccess={setSuccess} />}\r\n      {error && <ErrorBar setError={setError} />}\r\n      <div className=\"header\">\r\n        <img src={logo} className=\"logo\" />\r\n      </div>\r\n      <div className=\"header-greeting\">\r\n        <h1>CRM </h1>\r\n        <div>สวัสดี, SPORT FOR LIFE</div>\r\n        {/*\r\n        <div>\r\n          <ul className=\"selectBranch\">\r\n            <li onClick={()=> {\r\n              setBranch(\"ALL\");\r\n            }}>ALL</li>\r\n            <li onClick={()=> {\r\n              setBranch(\"UCL\");\r\n            }}>UCL</li>\r\n            <li onClick={()=> {\r\n              setBranch(\"PTK\");\r\n            }}>PTK</li>\r\n            <li onClick={()=> {\r\n              setBranch(\"LKB\");\r\n            }}>LKB</li>\r\n          </ul>\r\n          SELECTED BRANCH {branch}\r\n        </div>\r\n          */}\r\n        <div>\r\n          <ul className=\"selectDuration\">\r\n            <li onClick={()=> {\r\n              setDuration(\"YEAR\");\r\n            }}>THIS YEAR</li>\r\n            <li><Link to=\"/report\">Report</Link></li>\r\n            {/*\r\n            <li onClick={()=> {\r\n              setDuration(\"MONTH\");\r\n            }}>THIS MONTH</li>*/}\r\n          </ul>\r\n          คุณกำลังเลือก THIS {duration}\r\n        </div>\r\n    <div className=\"cards-stat\">\r\n      <div className=\"card\">\r\n        <h4>{duration} Sales</h4>\r\n        <div className=\"main\">{formatted(statSales)}</div>\r\n        <div>{formattedSign(statSales - statTargetSales, \" vs target\")}</div>\r\n        <div>{formattedSign(statSales - statLWSales, \" wow\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>{duration} Leads</h4>\r\n        <div className=\"main\">{formatted(statLeads)}</div>\r\n        <div>{formattedSign(statLeads - statLWLeads, \" wow\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>{duration} Customers</h4>\r\n        <div className=\"main\">{formatted(statCustomers)}/{formatted(statLeads)}</div>\r\n        <div>{formattedDec(statCustomers*100/(statLeads), \"% CR\")}</div>\r\n        <div>{formattedSign(statCustomers - statLWCustomers, \" wow\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>{duration} Expansions</h4>\r\n        <div className=\"main\">{formatted(statExpansions)}/{formatted(statCustomers)}</div>\r\n        <div>{formattedDec(statExpansions*100/(statCustomers), \"% CR\")}</div>\r\n        <div>{formattedSign(statExpansions - statLWExpansions, \" wow\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>{duration} จำนวนที่พลาด</h4>\r\n        <div className=\"main\">{formatted(statLosts)}/{formatted(statLeads)}</div>\r\n        <div>{formattedDec(statLosts*100/statLeads, \"% CR\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>ยอดต่อ Customer</h4>\r\n        <div className=\"main\">{formatted(parseInt(statSales/ (parseInt(statCustomers))))}</div>\r\n        <div>{formattedSign(parseInt(statSales/ (parseInt(statCustomers)))-(parseInt(statLWSales)/parseInt(statLWCustomers)), \" wow\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>Lead จาก Offline</h4>\r\n        <div className=\"main\">{formatted(parseInt(channelUCLOffline) + parseInt(channelPTKOffline) + parseInt(channelLKBOffline)) }</div>\r\n        <div>{formattedDec(channelUCLOffline*100/statLeads, \"% จากทั้งหมด\")}</div>\r\n      </div>\r\n      <div className=\"card\">\r\n        <h4>Lead จาก Online</h4>\r\n        <div className=\"main\">{formatted(parseInt(channelUCLOnline) + parseInt(channelPTKOnline) + parseInt(channelLKBOnline)) }</div>\r\n        <div>{formattedDec(channelUCLOnline*100/statLeads, \"% จากทั้งหมด\")}</div>\r\n      </div>\r\n    </div>\r\n    <div className=\"cards\">\r\n    <div className={\"card\"}>\r\n        <h4>Branch Performance</h4>\r\n        <div className=\"responsive\">\r\n      <table>\r\n        <tr>\r\n          <th>#</th>\r\n          <th>สาขา</th>\r\n          <th>ยอด YTD Sales</th>\r\n          <th>YTD Leads</th>\r\n          <th>YTD Customers</th>\r\n          <th>YTD Expansions</th>\r\n        </tr>\r\n        <tr>\r\n          <td>1</td>\r\n          <td>UCL</td>\r\n          <td>{formatted(sumUCLSales)}</td>\r\n          <td>{formatted(statLeadsUCL)}</td>\r\n          <td>{formatted(statCustomersUCL)}</td>\r\n          <td>{formatted(statExpansionsUCL)}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>2</td>\r\n          <td>PTK</td>\r\n          <td>{formatted(sumPTKSales)}</td>\r\n          <td>{formatted(statLeadsPTK)}</td>\r\n          <td>{formatted(statCustomersPTK)}</td>\r\n          <td>{formatted(statExpansionsPTK)}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>3</td>\r\n          <td>LKB</td>\r\n          <td>{formatted(sumLKBSales)}</td>\r\n          <td>{formatted(statLeadsLKB)}</td>\r\n          <td>{formatted(statCustomersLKB)}</td>\r\n          <td>{formatted(statExpansionsLKB)}</td>\r\n        </tr>\r\n      </table>\r\n      </div>\r\n      </div>\r\n      <div className={\"card\"}>\r\n      <h4>ยอด Sales (Actual VS Target)</h4>\r\n      <ResponsiveLine\r\n        data={[\r\n          {\r\n            \"id\": \"Actual\",\r\n            \"color\": \"hsl(254, 70%, 50%)\",\r\n            \"data\": [\r\n              {\r\n                \"x\": \"Jan\",\r\n                \"y\": periodSales && periodSales[0]\r\n              },\r\n              {\r\n                \"x\": \"Feb\",\r\n                \"y\": periodSales && periodSales[1]\r\n              },\r\n              {\r\n                \"x\": \"Mar\",\r\n                \"y\": periodSales && periodSales[2]\r\n              },\r\n              {\r\n                \"x\": \"Apr\",\r\n                \"y\": periodSales && periodSales[3]\r\n              },\r\n              {\r\n                \"x\": \"May\",\r\n                \"y\": periodSales && periodSales[4]\r\n              },\r\n              {\r\n                \"x\": \"Jun\",\r\n                \"y\": periodSales && periodSales[5]\r\n              },\r\n              {\r\n                \"x\": \"Jul\",\r\n                \"y\": periodSales && periodSales[6]\r\n              },\r\n              {\r\n                \"x\": \"Aug\",\r\n                \"y\": periodSales && periodSales[7]\r\n              },\r\n              {\r\n                \"x\": \"Sep\",\r\n                \"y\": periodSales && periodSales[8]\r\n              },\r\n              {\r\n                \"x\": \"Oct\",\r\n                \"y\": periodSales && periodSales[9]\r\n              },\r\n              {\r\n                \"x\": \"Nov\",\r\n                \"y\": periodSales && periodSales[10]\r\n              },\r\n              {\r\n                \"x\": \"Dec\",\r\n                \"y\": periodSales && periodSales[11]\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            \"id\": \"Target\",\r\n            \"color\": \"hsl(317, 70%, 50%)\",\r\n            \"data\": [\r\n              {\r\n                \"x\": \"Jan\",\r\n                \"y\": periodTargetSales && periodTargetSales[0]\r\n              },\r\n              {\r\n                \"x\": \"Feb\",\r\n                \"y\": periodTargetSales && periodTargetSales[1]\r\n              },\r\n              {\r\n                \"x\": \"Mar\",\r\n                \"y\": periodTargetSales && periodTargetSales[2]\r\n              },\r\n              {\r\n                \"x\": \"Apr\",\r\n                \"y\": periodTargetSales && periodTargetSales[3]\r\n              },\r\n              {\r\n                \"x\": \"May\",\r\n                \"y\": periodTargetSales && periodTargetSales[4]\r\n              },\r\n              {\r\n                \"x\": \"Jun\",\r\n                \"y\": periodTargetSales && periodTargetSales[5]\r\n              },\r\n              {\r\n                \"x\": \"Jul\",\r\n                \"y\": periodTargetSales && periodTargetSales[6]\r\n              },\r\n              {\r\n                \"x\": \"Aug\",\r\n                \"y\": periodTargetSales && periodTargetSales[7]\r\n              },\r\n              {\r\n                \"x\": \"Sep\",\r\n                \"y\": periodTargetSales && periodTargetSales[8]\r\n              },\r\n              {\r\n                \"x\": \"Oct\",\r\n                \"y\": periodTargetSales && periodTargetSales[9]\r\n              },\r\n              {\r\n                \"x\": \"Nov\",\r\n                \"y\": periodTargetSales && periodTargetSales[10]\r\n              },\r\n              {\r\n                \"x\": \"Dec\",\r\n                \"y\": periodTargetSales && periodTargetSales[11]\r\n              }\r\n            ]\r\n          }\r\n        ]}\r\n        margin={{ top: 0, right: 110, bottom: 50, left: 60 }}\r\n        xScale={{ type: 'point' }}\r\n        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n        yFormat=\" >-.2f\"\r\n        axisTop={null}\r\n        axisRight={null}\r\n        axisBottom={{\r\n            orient: 'bottom',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'ช่วงเวลา',\r\n            legendOffset: 36,\r\n            legendPosition: 'middle'\r\n        }}\r\n        axisLeft={{\r\n            orient: 'left',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: '',\r\n            legendOffset: -40,\r\n            legendPosition: 'middle'\r\n        }}\r\n        pointSize={10}\r\n        pointColor={{ theme: 'background' }}\r\n        pointBorderWidth={2}\r\n        pointBorderColor={{ from: 'serieColor' }}\r\n        pointLabelYOffset={-12}\r\n        useMesh={true}\r\n        legends={[\r\n            {\r\n                anchor: 'bottom-right',\r\n                direction: 'column',\r\n                justify: false,\r\n                translateX: 100,\r\n                translateY: 0,\r\n                itemsSpacing: 0,\r\n                itemDirection: 'left-to-right',\r\n                itemWidth: 80,\r\n                itemHeight: 20,\r\n                itemOpacity: 0.75,\r\n                symbolSize: 12,\r\n                symbolShape: 'circle',\r\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemBackground: 'rgba(0, 0, 0, .03)',\r\n                            itemOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n    />\r\n      </div>\r\n      <div className={\"card\"}>\r\n      <h4>ยอด Sales รายสาขา</h4>\r\n      <ResponsiveLine\r\n        data={[\r\n          {\r\n            \"id\": \"UCL\",\r\n            \"color\": \"hsl(177, 70%, 50%)\",\r\n            \"data\": [\r\n              {\r\n                \"x\": \"Jan\",\r\n                \"y\": periodUCLSales && periodUCLSales[0]\r\n              },\r\n              {\r\n                \"x\": \"Feb\",\r\n                \"y\": periodUCLSales && periodUCLSales[1]\r\n              },\r\n              {\r\n                \"x\": \"Mar\",\r\n                \"y\": periodUCLSales && periodUCLSales[2]\r\n              },\r\n              {\r\n                \"x\": \"Apr\",\r\n                \"y\": periodUCLSales && periodUCLSales[3]\r\n              },\r\n              {\r\n                \"x\": \"May\",\r\n                \"y\": periodUCLSales && periodUCLSales[4]\r\n              },\r\n              {\r\n                \"x\": \"Jun\",\r\n                \"y\": periodUCLSales && periodUCLSales[5]\r\n              },\r\n              {\r\n                \"x\": \"Jul\",\r\n                \"y\": periodUCLSales && periodUCLSales[6]\r\n              },\r\n              {\r\n                \"x\": \"Aug\",\r\n                \"y\": periodUCLSales && periodUCLSales[7]\r\n              },\r\n              {\r\n                \"x\": \"Sep\",\r\n                \"y\": periodUCLSales && periodUCLSales[8]\r\n              },\r\n              {\r\n                \"x\": \"Oct\",\r\n                \"y\": periodUCLSales && periodUCLSales[9]\r\n              },\r\n              {\r\n                \"x\": \"Nov\",\r\n                \"y\": periodUCLSales && periodUCLSales[10]\r\n              },\r\n              {\r\n                \"x\": \"Dec\",\r\n                \"y\": periodUCLSales && periodUCLSales[11]\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            \"id\": \"LKB\",\r\n            \"color\": \"hsl(254, 70%, 50%)\",\r\n            \"data\": [\r\n              {\r\n                \"x\": \"Jan\",\r\n                \"y\": periodLKBSales && periodLKBSales[0]\r\n              },\r\n              {\r\n                \"x\": \"Feb\",\r\n                \"y\": periodLKBSales && periodLKBSales[1]\r\n              },\r\n              {\r\n                \"x\": \"Mar\",\r\n                \"y\": periodLKBSales && periodLKBSales[2]\r\n              },\r\n              {\r\n                \"x\": \"Apr\",\r\n                \"y\": periodLKBSales && periodLKBSales[3]\r\n              },\r\n              {\r\n                \"x\": \"May\",\r\n                \"y\": periodLKBSales && periodLKBSales[4]\r\n              },\r\n              {\r\n                \"x\": \"Jun\",\r\n                \"y\": periodLKBSales && periodLKBSales[5]\r\n              },\r\n              {\r\n                \"x\": \"Jul\",\r\n                \"y\": periodLKBSales && periodLKBSales[6]\r\n              },\r\n              {\r\n                \"x\": \"Aug\",\r\n                \"y\": periodLKBSales && periodLKBSales[7]\r\n              },\r\n              {\r\n                \"x\": \"Sep\",\r\n                \"y\": periodLKBSales && periodLKBSales[8]\r\n              },\r\n              {\r\n                \"x\": \"Oct\",\r\n                \"y\": periodLKBSales && periodLKBSales[9]\r\n              },\r\n              {\r\n                \"x\": \"Nov\",\r\n                \"y\": periodLKBSales && periodLKBSales[10]\r\n              },\r\n              {\r\n                \"x\": \"Dec\",\r\n                \"y\": periodLKBSales && periodLKBSales[11]\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            \"id\": \"PTK\",\r\n            \"color\": \"hsl(140, 70%, 50%)\",\r\n            \"data\": [\r\n              {\r\n                \"x\": \"Jan\",\r\n                \"y\": periodPTKSales && periodPTKSales[0]\r\n              },\r\n              {\r\n                \"x\": \"Feb\",\r\n                \"y\": periodPTKSales && periodPTKSales[1]\r\n              },\r\n              {\r\n                \"x\": \"Mar\",\r\n                \"y\": periodPTKSales && periodPTKSales[2]\r\n              },\r\n              {\r\n                \"x\": \"Apr\",\r\n                \"y\": periodPTKSales && periodPTKSales[3]\r\n              },\r\n              {\r\n                \"x\": \"May\",\r\n                \"y\": periodPTKSales && periodPTKSales[4]\r\n              },\r\n              {\r\n                \"x\": \"Jun\",\r\n                \"y\": periodPTKSales && periodPTKSales[5]\r\n              },\r\n              {\r\n                \"x\": \"Jul\",\r\n                \"y\": periodPTKSales && periodPTKSales[6]\r\n              },\r\n              {\r\n                \"x\": \"Aug\",\r\n                \"y\": periodPTKSales && periodPTKSales[7]\r\n              },\r\n              {\r\n                \"x\": \"Sep\",\r\n                \"y\": periodPTKSales && periodPTKSales[8]\r\n              },\r\n              {\r\n                \"x\": \"Oct\",\r\n                \"y\": periodPTKSales && periodPTKSales[9]\r\n              },\r\n              {\r\n                \"x\": \"Nov\",\r\n                \"y\": periodPTKSales && periodPTKSales[10]\r\n              },\r\n              {\r\n                \"x\": \"Dec\",\r\n                \"y\": periodPTKSales && periodPTKSales[11]\r\n              }\r\n            ]\r\n          }\r\n        ]}\r\n        margin={{ top: 50, right: 110, bottom: 50, left: 60 }}\r\n        xScale={{ type: 'point' }}\r\n        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n        yFormat=\" >-.2f\"\r\n        axisTop={null}\r\n        axisRight={null}\r\n        axisBottom={{\r\n            orient: 'bottom',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'ช่วงเวลา',\r\n            legendOffset: 36,\r\n            legendPosition: 'middle'\r\n        }}\r\n        axisLeft={{\r\n            orient: 'left',\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: '',\r\n            legendOffset: -40,\r\n            legendPosition: 'middle'\r\n        }}\r\n        pointSize={10}\r\n        pointColor={{ theme: 'background' }}\r\n        pointBorderWidth={2}\r\n        pointBorderColor={{ from: 'serieColor' }}\r\n        pointLabelYOffset={-12}\r\n        useMesh={true}\r\n        legends={[\r\n            {\r\n                anchor: 'bottom-right',\r\n                direction: 'column',\r\n                justify: false,\r\n                translateX: 100,\r\n                translateY: 0,\r\n                itemsSpacing: 0,\r\n                itemDirection: 'left-to-right',\r\n                itemWidth: 80,\r\n                itemHeight: 20,\r\n                itemOpacity: 0.75,\r\n                symbolSize: 12,\r\n                symbolShape: 'circle',\r\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemBackground: 'rgba(0, 0, 0, .03)',\r\n                            itemOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n    />\r\n      </div>\r\n      <div className=\"card\">\r\n      <h4>Sales funnel</h4>\r\n      <div>Leads | Customers | Expansions</div>\r\n      <ResponsiveFunnel\r\n          data={[\r\n            {\r\n              \"id\": \"Leads\",\r\n              \"value\": statLeads,\r\n              \"label\": \"Leads\"\r\n            },\r\n            {\r\n              \"id\": \"Customers\",\r\n              \"value\": statCustomers,\r\n              \"label\": \"Customers\"\r\n            },\r\n            {\r\n              \"id\": \"Expansions\",\r\n              \"value\": statExpansions,\r\n              \"label\": \"Expansions\"\r\n            }\r\n          ]}\r\n          margin={{ top: 20, right: 20, bottom: 20, left: 20 }}\r\n          direction=\"horizontal\"\r\n          valueFormat=\">-.4s\"\r\n          colors={{ scheme: 'spectral' }}\r\n          borderWidth={20}\r\n          labelColor={{ from: 'color', modifiers: [ [ 'darker', 3 ] ] }}\r\n          beforeSeparatorLength={10}\r\n          beforeSeparatorOffset={20}\r\n          afterSeparatorLength={10}\r\n          afterSeparatorOffset={20}\r\n          currentPartSizeExtension={10}\r\n          currentBorderWidth={40}\r\n          motionConfig=\"wobbly\"\r\n        />\r\n      </div>\r\n      <div className=\"card\">\r\n      <h4>Sales funnel แต่ละสาขา</h4>\r\n      <ResponsiveBar\r\n        data={salesFunnelByBranch}\r\n        keys={[ 'UCL', 'PTK', 'LKB' ]}\r\n        indexBy=\"สถานะ\"\r\n        margin={{ top: 50, right: 130, bottom: 50, left: 60 }}\r\n        padding={0.3}\r\n        valueScale={{ type: 'linear' }}\r\n        indexScale={{ type: 'band', round: true }}\r\n        colors={{ scheme: 'nivo' }}\r\n        defs={[\r\n            {\r\n                id: 'dots',\r\n                type: 'patternDots',\r\n                background: 'inherit',\r\n                color: '#38bcb2',\r\n                size: 4,\r\n                padding: 1,\r\n                stagger: true\r\n            },\r\n            {\r\n                id: 'lines',\r\n                type: 'patternLines',\r\n                background: 'inherit',\r\n                color: '#eed312',\r\n                rotation: -45,\r\n                lineWidth: 6,\r\n                spacing: 10\r\n            }\r\n        ]}\r\n        fill={[\r\n            {\r\n                match: {\r\n                    id: 'fries'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'sandwich'\r\n                },\r\n                id: 'lines'\r\n            }\r\n        ]}\r\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\r\n        axisTop={null}\r\n        axisRight={null}\r\n        axisBottom={{\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'สถานะ',\r\n            legendPosition: 'middle',\r\n            legendOffset: 32\r\n        }}\r\n        axisLeft={{\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'จำนวน',\r\n            legendPosition: 'middle',\r\n            legendOffset: -40\r\n        }}\r\n        labelSkipWidth={12}\r\n        labelSkipHeight={12}\r\n        labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\r\n        legends={[\r\n            {\r\n                dataFrom: 'keys',\r\n                anchor: 'bottom-right',\r\n                direction: 'column',\r\n                justify: false,\r\n                translateX: 120,\r\n                translateY: 0,\r\n                itemsSpacing: 2,\r\n                itemWidth: 100,\r\n                itemHeight: 20,\r\n                itemDirection: 'left-to-right',\r\n                itemOpacity: 0.85,\r\n                symbolSize: 20,\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n        animate={true}\r\n        motionStiffness={90}\r\n        motionDamping={15}\r\n    />\r\n      </div>\r\n      <div className=\"card\">\r\n      <h4>Lead แต่ละ Channel</h4>\r\n      <ResponsiveBar\r\n        data={leadConversionBySourceData}\r\n        keys={[ 'Online', 'Offline' ]}\r\n        indexBy=\"สาขา\"\r\n        margin={{ top: 50, right: 130, bottom: 50, left: 60 }}\r\n        padding={0.3}\r\n        valueScale={{ type: 'linear' }}\r\n        indexScale={{ type: 'band', round: true }}\r\n        colors={{ scheme: 'nivo' }}\r\n        defs={[\r\n            {\r\n                id: 'dots',\r\n                type: 'patternDots',\r\n                background: 'inherit',\r\n                color: '#38bcb2',\r\n                size: 4,\r\n                padding: 1,\r\n                stagger: true\r\n            },\r\n            {\r\n                id: 'lines',\r\n                type: 'patternLines',\r\n                background: 'inherit',\r\n                color: '#eed312',\r\n                rotation: -45,\r\n                lineWidth: 6,\r\n                spacing: 10\r\n            }\r\n        ]}\r\n        fill={[\r\n            {\r\n                match: {\r\n                    id: 'fries'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'sandwich'\r\n                },\r\n                id: 'lines'\r\n            }\r\n        ]}\r\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\r\n        axisTop={null}\r\n        axisRight={null}\r\n        axisBottom={{\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'สาขา',\r\n            legendPosition: 'middle',\r\n            legendOffset: 32\r\n        }}\r\n        axisLeft={{\r\n            tickSize: 5,\r\n            tickPadding: 5,\r\n            tickRotation: 0,\r\n            legend: 'จำนวน',\r\n            legendPosition: 'middle',\r\n            legendOffset: -40\r\n        }}\r\n        labelSkipWidth={12}\r\n        labelSkipHeight={12}\r\n        labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\r\n        legends={[\r\n            {\r\n                dataFrom: 'keys',\r\n                anchor: 'bottom-right',\r\n                direction: 'column',\r\n                justify: false,\r\n                translateX: 120,\r\n                translateY: 0,\r\n                itemsSpacing: 2,\r\n                itemWidth: 100,\r\n                itemHeight: 20,\r\n                itemDirection: 'left-to-right',\r\n                itemOpacity: 0.85,\r\n                symbolSize: 20,\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemOpacity: 1\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n        animate={true}\r\n        motionStiffness={90}\r\n        motionDamping={15}\r\n    />\r\n      </div>\r\n      <div className={\"card\"}>\r\n        <h4>Top Customers</h4>\r\n        <div className=\"responsive\">\r\n      <table>\r\n        <tr>\r\n          <th>#</th>\r\n          <th>ชื่อลูกค้า</th>\r\n          <th>ยอด Sales</th>\r\n          <th>สาขาที่สมัคร</th>\r\n        </tr>\r\n        {\r\n          topSpender.map(function(item, i){\r\n            if(i<5) {\r\n            return (\r\n              <tr>\r\n                <td>{i+1}</td>\r\n                <td>{item.name}</td>\r\n                <td>{formatted(item.customer_sales)} บาท</td>\r\n                <td>{item.sale_branch}</td>\r\n              </tr>\r\n              )\r\n            }\r\n          })\r\n        }\r\n      </table>\r\n      </div>\r\n      </div>\r\n      <div className=\"card\">\r\n      <h4>เหตุผลลูกค้า</h4>\r\n      <ResponsivePie\r\n        data={lostsReason}\r\n        margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\r\n        innerRadius={0.5}\r\n        padAngle={0.7}\r\n        cornerRadius={3}\r\n        activeOuterRadiusOffset={8}\r\n        borderWidth={1}\r\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 0.2 ] ] }}\r\n        arcLinkLabelsSkipAngle={10}\r\n        arcLinkLabelsTextColor=\"#333333\"\r\n        arcLinkLabelsThickness={2}\r\n        arcLinkLabelsColor={{ from: 'color' }}\r\n        arcLabelsSkipAngle={10}\r\n        arcLabelsTextColor={{ from: 'color', modifiers: [ [ 'darker', 2 ] ] }}\r\n        defs={[\r\n            {\r\n                id: 'dots',\r\n                type: 'patternDots',\r\n                background: 'inherit',\r\n                color: 'rgba(255, 255, 255, 0.3)',\r\n                size: 4,\r\n                padding: 1,\r\n                stagger: true\r\n            },\r\n            {\r\n                id: 'lines',\r\n                type: 'patternLines',\r\n                background: 'inherit',\r\n                color: 'rgba(255, 255, 255, 0.3)',\r\n                rotation: -45,\r\n                lineWidth: 6,\r\n                spacing: 10\r\n            }\r\n        ]}\r\n        fill={[\r\n            {\r\n                match: {\r\n                    id: 'ruby'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'c'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'go'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'python'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'scala'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'lisp'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'elixir'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'javascript'\r\n                },\r\n                id: 'lines'\r\n            }\r\n        ]}\r\n        legends={[\r\n            {\r\n                anchor: 'bottom',\r\n                direction: 'row',\r\n                justify: false,\r\n                translateX: 0,\r\n                translateY: 56,\r\n                itemsSpacing: 0,\r\n                itemWidth: 100,\r\n                itemHeight: 18,\r\n                itemTextColor: '#999',\r\n                itemDirection: 'left-to-right',\r\n                itemOpacity: 1,\r\n                symbolSize: 18,\r\n                symbolShape: 'circle',\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemTextColor: '#000'\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n    />\r\n      </div>\r\n      <div className=\"card\">\r\n      <h4>หมวดหมู่สินค้าที่ Leads สนใจ</h4>\r\n      <ResponsivePie\r\n        data={categorySales}\r\n        margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\r\n        innerRadius={0.5}\r\n        padAngle={0.7}\r\n        cornerRadius={3}\r\n        activeOuterRadiusOffset={8}\r\n        borderWidth={1}\r\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 0.2 ] ] }}\r\n        arcLinkLabelsSkipAngle={10}\r\n        arcLinkLabelsTextColor=\"#333333\"\r\n        arcLinkLabelsThickness={2}\r\n        arcLinkLabelsColor={{ from: 'color' }}\r\n        arcLabelsSkipAngle={10}\r\n        arcLabelsTextColor={{ from: 'color', modifiers: [ [ 'darker', 2 ] ] }}\r\n        defs={[\r\n            {\r\n                id: 'dots',\r\n                type: 'patternDots',\r\n                background: 'inherit',\r\n                color: 'rgba(255, 255, 255, 0.3)',\r\n                size: 4,\r\n                padding: 1,\r\n                stagger: true\r\n            },\r\n            {\r\n                id: 'lines',\r\n                type: 'patternLines',\r\n                background: 'inherit',\r\n                color: 'rgba(255, 255, 255, 0.3)',\r\n                rotation: -45,\r\n                lineWidth: 6,\r\n                spacing: 10\r\n            }\r\n        ]}\r\n        fill={[\r\n            {\r\n                match: {\r\n                    id: 'ruby'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'c'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'go'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'python'\r\n                },\r\n                id: 'dots'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'scala'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'lisp'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'elixir'\r\n                },\r\n                id: 'lines'\r\n            },\r\n            {\r\n                match: {\r\n                    id: 'javascript'\r\n                },\r\n                id: 'lines'\r\n            }\r\n        ]}\r\n        legends={[\r\n            {\r\n                anchor: 'bottom',\r\n                direction: 'row',\r\n                justify: false,\r\n                translateX: 0,\r\n                translateY: 56,\r\n                itemsSpacing: 0,\r\n                itemWidth: 100,\r\n                itemHeight: 18,\r\n                itemTextColor: '#999',\r\n                itemDirection: 'left-to-right',\r\n                itemOpacity: 1,\r\n                symbolSize: 18,\r\n                symbolShape: 'circle',\r\n                effects: [\r\n                    {\r\n                        on: 'hover',\r\n                        style: {\r\n                            itemTextColor: '#000'\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]}\r\n    />\r\n      </div>\r\n      \r\n    </div>\r\n        <div />\r\n      </div>\r\n\r\n      <Navbar active={\"Dashboard\"} />\r\n    </>\r\n  );\r\n\r\n  function WeekSelector() {\r\n    for (var i = 1; i <= moment().week(); i++) {\r\n      return <option value={i}>WK{i}</option>\r\n    }\r\n    \r\n  }\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { useFirestore } from \"./Firestore.js\";\r\nimport { Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport logo from \"../img/header_logo.svg\";\r\nimport { ResponsiveBar } from '@nivo/bar'\r\n\r\nimport LoadingBar from \"../components/LoadingBar\";\r\nimport SuccessBar from \"../components/SuccessBar\";\r\nimport ErrorBar from \"../components/ErrorBar\";\r\n\r\nimport { ResponsiveFunnel } from '@nivo/funnel'\r\n\r\nimport ReactToPdf from \"react-to-pdf\";\r\n\r\nexport default function Account() {\r\n  const { targetList, updateTarget } = useFirestore();\r\n  const ref = React.createRef();\r\n  const [targetSalesUCL, setTargetSalesUCL] = useState([0,0,0,0,0,0,0,0,0,0,0,0]);\r\n  const [targetSalesPTK, setTargetSalesPTK] = useState([0,0,0,0,0,0,0,0,0,0,0,0]);\r\n  const [targetSalesLKB, setTargetSalesLKB] = useState([0,0,0,0,0,0,0,0,0,0,0,0]);\r\n  const [month, setMonth] = useState([\"JAN\", \"FEB\", \"MAR\", \"APR\", \"MAY\", \"JUN\", \"JUL\", \"AUG\", \"SEP\", \"OCT\", \"NOV\", \"DEC\"])\r\n  const [initialForm, setInitialForm] = useState();\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(async() => {\r\n    console.log(targetList)\r\n    setInitialForm({\r\n      targetSalesUCL: targetList && targetList.ucl ? targetList.ucl[\"2021\"] : [],\r\n      targetSalesPTK: targetList && targetList.ptk ? targetList.ptk[\"2021\"] : [],\r\n      targetSalesLKB: targetList && targetList.lkb ? targetList.lkb[\"2021\"] : []\r\n    });\r\n  }, [targetList])\r\n\r\n  const formValidation = Yup.object().shape({\r\n  });\r\n\r\n  function formatted(input) {\r\n    return input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading && <LoadingBar />}\r\n      {success && <SuccessBar setSuccess={setSuccess} />}\r\n      {error && <ErrorBar setError={setError} />}\r\n      <div className=\"header\">\r\n        <img src={logo} className=\"logo\" />\r\n      </div>\r\n      <div className=\"header-greeting\">\r\n        <h1>CRM </h1>\r\n        <div>สวัสดี, SPORT FOR LIFE</div>\r\n        <div>ออกจากระบบ</div>\r\n        <div>\r\n          <ul className=\"selectDuration\">\r\n            <li>ตั้งค่า Goal target</li>\r\n            <li>จัดการบัญชีผู้ใช้</li>\r\n            {/*\r\n            <li onClick={()=> {\r\n              setDuration(\"MONTH\");\r\n            }}>THIS MONTH</li>*/}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"my-container\">\r\n        <div>\r\n          <h2>ตั้งค่า Goal target</h2>\r\n        <Formik\r\n          enableReinitialize\r\n          initialValues={{ ...initialForm }}\r\n          validationSchema={formValidation}\r\n          validateOnChange={false}\r\n          validateOnBlur={false}\r\n          \r\n          onSubmit={async (values, { setSubmitting,resetForm }) => {\r\n            console.log(values);\r\n            setSuccess()\r\n            setSubmitting(true);\r\n            setLoading(true);\r\n            setSubmitting(false);\r\n            setLoading(false);\r\n            setTargetSalesUCL(values.targetSalesUCL.map(v => v === undefined ? 0 : v))\r\n            setTargetSalesLKB(values.targetSalesLKB.map(v => v === undefined ? 0 : v))\r\n            setTargetSalesPTK(values.targetSalesPTK.map(v => v === undefined ? 0 : v))\r\n            let goal = {\r\n              ucl: values.targetSalesUCL.map(v => v === undefined ? 0 : v),\r\n              lkb: values.targetSalesLKB.map(v => v === undefined ? 0 : v),\r\n              ptk: values.targetSalesPTK.map(v => v === undefined ? 0 : v)\r\n            }\r\n            updateTarget(\"2021\", goal)\r\n            setSuccess(\"บันทึกข้อมูลสำเร็จ\")\r\n            return;\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            handleChange,\r\n            handleBlur,\r\n            handleSubmit,\r\n            isSubmitting,\r\n            setFieldValue,\r\n            resetForm\r\n          }) => (\r\n            <form onSubmit={handleSubmit}>\r\n              <div>\r\n                <div className=\"content\">\r\n                  {success && (\r\n                  <div className=\"success\">\r\n                    {success}\r\n                  </div>\r\n                  )}\r\n                  <label className=\"formError\">\r\n                    {errors.myref && errors.myref}\r\n                  </label>\r\n\r\n                  <table className=\"targetSetting\">\r\n                    <tr>\r\n                      <th>#</th>\r\n                      <th>สาขา</th>\r\n                      <th>2021</th>\r\n                      {month.map((value, index) => {\r\n                        return <th key={index}>{value}</th>\r\n                      })}\r\n                    </tr>\r\n                    <tr>\r\n                      <td>1</td>\r\n                      <td>UCL</td>\r\n                      <td>{\r\n                        values.targetSalesUCL ? values.targetSalesUCL.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0\r\n                      }</td>\r\n                      {month.map((value, index) => {\r\n                        return (\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              placeholder=\"Target\"\r\n                              onChange={handleChange}\r\n                              onBlur={handleBlur}\r\n                              name={`targetSalesUCL.${index}`}\r\n                              value={values.targetSalesUCL && typeof values.targetSalesUCL[index] !== 'undefined' && values.targetSalesUCL[index] || \"\"}\r\n                              key={index}\r\n                            />\r\n                          </td>\r\n                        )\r\n                      })}\r\n                    </tr>\r\n                    <tr>\r\n                      <td>2</td>\r\n                      <td>LKB</td>\r\n                      <td>{\r\n                        values.targetSalesLKB ? values.targetSalesLKB.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0\r\n                      }</td>\r\n                      {month.map((value, index) => {\r\n                        return (\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              placeholder=\"Target\"\r\n                              onChange={handleChange}\r\n                              onBlur={handleBlur}\r\n                              name={`targetSalesLKB.${index}`}\r\n                              value={values.targetSalesLKB && typeof values.targetSalesLKB[index] !== 'undefined' && values.targetSalesLKB[index] || \"\"}\r\n                              key={index}\r\n                            />\r\n                          </td>\r\n                        )\r\n                      })}\r\n                    </tr>\r\n                    <tr>\r\n                      <td>3</td>\r\n                      <td>PTK</td>\r\n                      <td>{\r\n                        values.targetSalesPTK ? values.targetSalesPTK.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0\r\n                      }</td>\r\n                      {month.map((value, index) => {\r\n                        return (\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              placeholder=\"Target\"\r\n                              onChange={handleChange}\r\n                              onBlur={handleBlur}\r\n                              name={`targetSalesPTK.${index}`}\r\n                              value={values.targetSalesPTK && typeof values.targetSalesPTK[index] !== 'undefined' && values.targetSalesPTK[index] || \"\"}\r\n                              key={index}\r\n                            />\r\n                          </td>\r\n                        )\r\n                      })}\r\n                    </tr>\r\n                    <tr>\r\n                      <td>4</td>\r\n                      <td>Total</td>\r\n                      <td>{\r\n                        parseInt(values.targetSalesUCL ? values.targetSalesUCL.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0) + \r\n                        parseInt(values.targetSalesLKB ? values.targetSalesLKB.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0) + \r\n                        parseInt(values.targetSalesPTK ? values.targetSalesPTK.reduce((a, b) => a + (parseInt(b) || 0), 0) : 0)\r\n                      }</td>\r\n                      {month.map((value, index) => {\r\n                        return (\r\n                          <td>\r\n                              {\r\n                              parseInt(values.targetSalesUCL && typeof values.targetSalesUCL[index] !== 'undefined' && values.targetSalesUCL[index] || 0) +\r\n                              parseInt(values.targetSalesLKB && typeof values.targetSalesLKB[index] !== 'undefined' && values.targetSalesLKB[index] || 0) +\r\n                              parseInt(values.targetSalesPTK && typeof values.targetSalesPTK[index] !== 'undefined' && values.targetSalesPTK[index] || 0)\r\n                              }\r\n                          </td>\r\n                        )\r\n                      })}\r\n                    </tr>\r\n                  </table>\r\n\r\n              </div>\r\n              </div>\r\n              <div className=\"actionButton\">\r\n                <button\r\n                  className=\"mainButton\"\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  บันทึก\r\n                </button>\r\n                <button\r\n                  type=\"reset\"\r\n                  className=\"resetButton\"\r\n                  onClick={() => {\r\n                    resetForm();\r\n                  }}\r\n                >\r\n                  ล้างค่า\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </Formik>\r\n\r\n        </div>\r\n        </div>\r\n      <Navbar active={\"ออกจากระบบ\"} />\r\n    </>\r\n  );\r\n\r\n  function Report(props) {\r\n    return (\r\n        <div className={\"report\"} ref={ref}>\r\n            <h1>Sport for life report</h1>\r\n            <h2>ช่องทาง หน้าร้าน</h2>\r\n            <div><h3>WK13</h3></div>\r\n            \r\n            <input/>\r\n        </div>\r\n    )\r\n  }\r\n\r\n}","import React, { useState, useEffect } from 'react';\nimport { ResponsiveFunnel } from '@nivo/funnel'\nimport { ResponsivePie } from '@nivo/pie'\nimport { ResponsiveBar } from '@nivo/bar'\nimport { ResponsiveLine } from '@nivo/line'\nimport { Line,Doughnut  } from 'react-chartjs-2';\nimport Navbar from \"../components/Navbar\";\nimport logo from \"../img/header_logo.svg\";\nimport * as Yup from \"yup\";\nimport { Formik } from \"formik\";\n\nimport LoadingBar from \"../components/LoadingBar\";\nimport SuccessBar from \"../components/SuccessBar\";\nimport ErrorBar from \"../components/ErrorBar\";\n\nimport { PDFExport } from \"@progress/kendo-react-pdf\";\n\nimport { useFirestore } from \"./Firestore.js\";\nimport moment from \"moment\";\n\nimport ReactToPdf from \"react-to-pdf\";\n\nexport default function Report() {\n  const pdfExportComponent = React.useRef(null);\n  const ref = React.createRef();\n  const { targetList, customerList, forecastList, reportList, updateForecast, updateReport } = useFirestore();\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [initialForm, setInitialForm] = useState();\n  const formValidation = Yup.object().shape({\n  });\n\n  useEffect(async() => {\n    setInitialForm({\n      sales : forecastList !== undefined && forecastList[\"2021-\"+moment().week()].sales,\n      customers : forecastList !== undefined && forecastList[\"2021-\"+moment().week()].customers,\n      section1: reportList && reportList[\"2021-22\"].section1,\n      section2: reportList && reportList[\"2021-22\"].section2,\n      section3: reportList && reportList[\"2021-22\"].section3,\n      section4: reportList && reportList[\"2021-22\"].section4,\n      section5: reportList && reportList[\"2021-22\"].section5,\n      section6: reportList && reportList[\"2021-22\"].section6,\n      section7: reportList && reportList[\"2021-22\"].section7,\n      section8: reportList && reportList[\"2021-22\"].section8,\n      section9: reportList && reportList[\"2021-22\"].section9,\n      section10: reportList && reportList[\"2021-22\"].section10,\n      section11: reportList && reportList[\"2021-22\"].section11,\n      section12: reportList && reportList[\"2021-22\"].section12,\n      section13: reportList && reportList[\"2021-22\"].section13,\n    });\n  }, [forecastList, reportList])\n\n  const [weeksInMonth, setWeeksInMonth] = [];\n  const [numberOfWeek, setNumberOfWeek] = useState(()=> {\n    let weeks = [];\n    for(var i = 1; i <= moment().week(); i++){\n      weeks.push(i);\n    }\n    return weeks;\n  });\n  const [selectedWeek, setSelectedWeek] = useState(moment().week())\n\n  const [branch, setBranch] = useState(\"ALL\");\n  const [duration, setDuration] = useState(\"YEAR\");\n\n  const [transactions, setTransactions] = useState([]);\n\n  const [statSales, setStatSales] = useState(0);\n  const [statTargetSales, setStatTargetSales] = useState(0);\n  const [statLWSales, setStatLWSales] = useState(0);\n\n  const [statLeads, setStatLeads] = useState(0);\n  const [statLWLeads, setStatLWLeads] = useState(0);\n  const [statCustomers, setStatCustomers] = useState(0);\n  const [statLWCustomers, setStatLWCustomers] = useState(0);\n  const [statExpansions, setStatExpansions] = useState(0);\n  const [statLWExpansions, setStatLWExpansions] = useState(0);\n  const [statLosts, setStatLosts] = useState(0);\n  const [statLWLosts, setStatLWLosts] = useState(0);\n\n  const [statLeadsUCL, setStatLeadsUCL] = useState(0);\n  const [statLeadsPTK, setStatLeadsPTK] = useState(0);\n  const [statLeadsLKB, setStatLeadsLKB] = useState(0);\n  const [statCustomersUCL, setStatCustomersUCL] = useState(0);\n  const [statCustomersPTK, setStatCustomersPTK] = useState(0);\n  const [statCustomersLKB, setStatCustomersLKB] = useState(0);\n  const [statExpansionsUCL, setStatExpansionsUCL] = useState(0);\n  const [statExpansionsPTK, setStatExpansionsPTK] = useState(0);\n  const [statExpansionsLKB, setStatExpansionsLKB] = useState(0);\n\n  const [branchPerformance, setBranchPerformace] = useState([]);\n  const [periodSales, setPeriodSales] = useState([]);\n  const [periodTargetSales, setPeriodTargetSales] = useState([]);\n  const [periodUCLSales, setPeriodUCLSales] = useState([]);\n  const [periodPTKSales, setPeriodPTKSales] = useState([]);\n  const [periodLKBSales, setPeriodLKBSales] = useState([]);\n\n  const [sumUCLSales, setSumUCLSales] = useState(0);\n  const [sumPTKSales, setSumPTKSales] = useState(0);\n  const [sumLKBSales, setSumLKBSales] = useState(0);\n\n  const [lostsReason, setLostReasons] = useState([]);\n  const [categorySales, setCategorySales] = useState([]);\n\n  const [topSpender, setTopSpender] = useState([]);\n\n  const [channelUCLOnline, setChannelUCLOnline] = useState(0);\n  const [channelUCLOffline, setChannelUCLOffline] = useState(0);\n  const [channelPTKOnline, setChannelPTKOnline] = useState(0);\n  const [channelPTKOffline, setChannelPTKOffline] = useState(0);\n  const [channelLKBOnline, setChannelLKBOnline] = useState(0);\n  const [channelLKBOffline, setChannelLKBOffline] = useState(0);\n\n  const [targetSalesUCL, setTargetSalesUCL] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\n  const [targetSalesPTK, setTargetSalesPTK] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\n  const [targetSalesLKB, setTargetSalesLKB] = useState([10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000,10000]);\n\n  useEffect(async () => {\n    setTargetSalesUCL(targetList && targetList.hasOwnProperty(\"ucl\") ? targetList.ucl[\"2021\"] : [])\n    setTargetSalesLKB(targetList && targetList.hasOwnProperty(\"lkb\") ? targetList.lkb[\"2021\"] : [])\n    setTargetSalesPTK(targetList && targetList.hasOwnProperty(\"ptk\") ? targetList.ptk[\"2021\"] : [])\n  }, [targetList])\n\n  useEffect(async () => {\n    let all_transactions = [];\n\n    let _statLeads = 0;\n    let _statCustomers = 0;\n    let _statExpansions = 0;\n    let _statLosts = 0;\n\n    let _statLWLeads = 0;\n    let _statLWCustomers = 0;\n    let _statLWExpansions = 0;\n    let _statLWLosts = 0;\n\n    let _statLeadsUCL = 0;\n    let _statLeadsPTK = 0;\n    let _statLeadsLKB = 0;\n\n    let _statCustomersUCL = 0;\n    let _statCustomersPTK = 0;\n    let _statCustomersLKB = 0;\n\n    let _statExpansionsUCL = 0;\n    let _statExpansionsPTK = 0;\n    let _statExpansionsLKB = 0;\n\n    let _channelUCLOnline = 0;\n    let _channelUCLOffline = 0;\n    let _channelPTKOnline = 0;\n    let _channelPTKOffline = 0;\n    let _channelLKBOnline = 0;\n    let _channelLKBOffline = 0;\n\n    let _lostsReason = [];\n    let _categorySales = [];\n\n    let _topSpender = [];\n\n    let _branchPerformance = [];\n\n    let today = moment();\n\n    if(customerList) {\n      _statLeads = customerList.length;\n      _statLWLeads = customerList.filter(function (el) {\n        return moment.unix(el.dt).week() <= today.week()-1\n      }).length;\n\n      _statLWCustomers = customerList.filter(function (el) {\n        return moment.unix(el.dt).week() <= today.week()-1 && el.stage == \"Customer\"\n      }).length;\n\n      _statLWExpansions = customerList.filter(function (el) {\n        return moment.unix(el.dt).week() <= today.week()-1 && el.stage == \"Expansion\"\n      }).length;\n\n      setStatLWLeads(_statLWLeads - _statLWCustomers);\n      setStatLWCustomers(_statLWCustomers + _statLWExpansions);\n      setStatLWExpansions(_statLWExpansions);\n      setStatLWLosts(0);\n\n      for (let i = 0; i < customerList.length; i++) {\n        let customer = customerList[i];\n\n        if(customer.hasOwnProperty('lead_category')) {\n          if(customer.lead_category != \"\") {\n            let index = _categorySales.findIndex(x => x.id == customer.lead_category);\n            if(index >= 0) _categorySales[index].value+=1\n            else _categorySales.push({id: customer.lead_category, label: customer.lead_category, value: 1})\n          }\n        }\n      \n        if(customer.hasOwnProperty('lead_reason')) {\n          if(customer.lead_reason != \"\") {\n            let index = _lostsReason.findIndex(x => x.id == customer.lead_reason);\n            if(index >= 0) _lostsReason[index].value+=1\n            else _lostsReason.push({id: customer.lead_reason, label: customer.lead_reason, value: 1})\n          }\n        }\n\n        if(customer.hasOwnProperty('stage')) {\n          if(duration == \"YEAR\") {\n            if(moment.unix(customer.dt).format('YYYY') == today.format('YYYY')) {\n              if(customer.sale_branch == \"พระรามสี่\") {\n                _statLeadsUCL += 1;\n                if(customer.channel == \"online\") _channelUCLOnline += 1;\n                else if(customer.channel == \"offline\") _channelUCLOffline += 1;\n              }\n              else if(customer.sale_branch == \"พัฒนาการ\") {\n                _statLeadsPTK += 1;\n                if(customer.channel == \"online\") _channelPTKOnline += 1;\n                else if(customer.channel == \"offline\") _channelPTKOffline += 1;\n              }\n              else if(customer.sale_branch == \"ลาดกระบัง\") {\n                _statLeadsLKB += 1;\n                if(customer.channel == \"online\") _channelLKBOnline += 1;\n                else if(customer.channel == \"offline\") _channelLKBOffline += 1;\n              }\n              if(customer.stage == \"Customer\") {\n                _statCustomers+= 1;\n                if(customer.sale_branch == \"พระรามสี่\") _statCustomersUCL += 1;\n                else if(customer.sale_branch == \"พัฒนาการ\") _statCustomersPTK += 1;\n                else if(customer.sale_branch == \"ลาดกระบัง\") _statCustomersLKB += 1;\n              }\n              if(customer.stage == \"Expansion\") {\n                _statExpansions += 1;\n                if(customer.sale_branch == \"พระรามสี่\") _statExpansionsUCL += 1;\n                else if(customer.sale_branch == \"พัฒนาการ\") _statExpansionsPTK += 1;\n                else if(customer.sale_branch == \"ลาดกระบัง\") _statExpansionsLKB += 1;\n              }\n            }\n          } else if (duration == \"MONTH\"){\n            if(moment.unix(customer.dt).format('M') == today.format('M')) {\n              if(customer.stage == \"Customer\") _statCustomers+= 1;\n              if(customer.stage == \"Expansion\") _statExpansions += 1;\n            }\n          }\n        }\n        _statLosts = _statLeads - _statCustomers;\n        setStatLeads(_statLeads);\n        setStatCustomers(_statCustomers + _statExpansions);\n        setStatExpansions(_statExpansions);\n        setStatLosts(_statLosts);\n\n        setStatLeadsUCL(_statLeadsUCL);\n        setStatLeadsPTK(_statLeadsPTK);\n        setStatLeadsLKB(_statLeadsLKB);\n\n        setStatCustomersUCL(_statCustomersUCL + _statExpansionsUCL);\n        setStatCustomersPTK(_statCustomersPTK + _statExpansionsPTK);\n        setStatCustomersLKB(_statCustomersLKB + _statExpansionsLKB);\n\n        setStatExpansionsUCL(_statExpansionsUCL);\n        setStatExpansionsPTK(_statExpansionsPTK);\n        setStatExpansionsLKB(_statExpansionsLKB);\n\n        setChannelUCLOnline(_channelUCLOnline);\n        setChannelUCLOffline(_channelUCLOffline);\n        setChannelPTKOnline(_channelPTKOnline);\n        setChannelPTKOffline(_channelPTKOffline);\n        setChannelLKBOnline(_channelLKBOnline);\n        setChannelLKBOffline(_channelLKBOffline);\n\n        setLostReasons(_lostsReason);\n        setCategorySales(_categorySales);\n\n        let mySum = 0;\n        if(customer.hasOwnProperty('customer_transactions')) {\n          let trans = customer.customer_transactions;\n          for (let j = 0; j < trans.length; j++) {\n            let item = trans[j];\n            let tran = {\n              myref: customer.myref,\n              customer_sales : item.hasOwnProperty('customer_sales') ? parseInt(item.customer_sales) : 0,\n              channel : item.channel,\n              sale_dt : item.dt,\n              sale_wk : moment.unix(item.dt).week(),\n              sale_month : moment.unix(item.dt).format('M'),\n              sale_year : moment.unix(item.dt).format('YYYY'),\n              sale_branch : item.sale_branch,\n              name : customer.name,\n              register_branch : customer.sale_branch,\n              stage : customer.stage,\n              channel : customer.channel\n            }\n            all_transactions.push(tran);\n            mySum += tran.customer_sales;\n          }\n        }\n        let myCustomer = {\n          name: customer.name,\n          customer_sales: mySum,\n          sale_branch: customer.sale_branch\n        }\n        if(mySum > 0) _topSpender.push(myCustomer);\n      }\n  }\n  _topSpender.sort((a,b) => (a.customer_sales > b.customer_sales) ? -1 : ((b.customer_sales > a.customer_sales) ? 1 : 0))\n  setTopSpender(_topSpender)\n  setTransactions(all_transactions);\n  }, [customerList]);\n  \n  useEffect(async () => {\n    let _statSales = 0;\n    let _statTargetSales = 0;\n    let _statLWSales = 0;\n\n    let _periodSales = []\n    let _periodTargetSales = []\n    let _periodUCLSales = []\n    let _periodPTKSales = []\n    let _periodLKBSales = []\n    let _AllBranchPeriodSales = []\n    if(duration == \"YEAR\") {\n      _periodSales = [0,0,0,0,0,0,0,0,0,0,0,0]\n      _AllBranchPeriodSales = [targetSalesUCL, targetSalesLKB, targetSalesPTK]\n      _periodTargetSales = _AllBranchPeriodSales.reduce((r, a) => a.map((b, i) => (r[i] || 0) + b), []);\n      //_periodTargetSales = [40000,40000,45000,44000,55000,50000,60000,55000,55000,53000,48000,50000]\n      _periodUCLSales = [0,0,0,0,0,0,0,0,0,0,0,0]\n      _periodPTKSales = [0,0,0,0,0,0,0,0,0,0,0,0]\n      _periodLKBSales = [0,0,0,0,0,0,0,0,0,0,0,0]\n    } else if(duration == \"MONTH\") {\n      _periodSales = [0,0,0,0,0]\n      _periodSales = [0,0,0,0,0]\n      _periodTargetSales = [0,0,0,0,0]\n      _periodUCLSales = [0,0,0,0,0]\n      _periodPTKSales = [0,0,0,0,0]\n      _periodLKBSales = [0,0,0,0,0]\n    }\n\n    let today = moment();\n    for(let i=0; i < transactions.length; i++) {\n      let tran = transactions[i];\n      if(duration == \"YEAR\") {\n        if(tran.sale_year == today.format('YYYY')) {\n          _statSales += parseInt(tran.customer_sales);\n          _periodSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n          if(tran.sale_branch == \"พระรามสี่\") _periodUCLSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n          else if(tran.sale_branch == \"พัฒนาการ\") _periodPTKSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n          else if(tran.sale_branch == \"ลาดกระบัง\") _periodLKBSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n        }\n      } else if (duration == \"MONTH\"){\n        if(tran.sale_month == today.format('M')) {\n          _statSales += parseInt(tran.customer_sales);\n          //_periodSales[tran.sale_month -1] = tran.customer_sales;\n          if(tran.sale_branch == \"พระรามสี่\") _periodUCLSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n          else if(tran.sale_branch == \"พัฒนาการ\") _periodPTKSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n          else if(tran.sale_branch == \"ลาดกระบัง\") _periodLKBSales[tran.sale_month -1] += parseInt(tran.customer_sales);\n        }\n      }\n\n      if(tran.sale_week < today.week()) _statLWSales += parseInt(tran.customer_sales);\n    }\n\n    var _sumUCLSales = _periodUCLSales.reduce(function(a, b){\n      return a + b;\n    }, 0);\n    var _sumPTKSales = _periodPTKSales.reduce(function(a, b){\n      return a + b;\n    }, 0);\n    var _sumLKBSales = _periodLKBSales.reduce(function(a, b){\n      return a + b;\n    }, 0);\n\n    setSumUCLSales(_sumUCLSales);\n    setSumPTKSales(_sumPTKSales);\n    setSumLKBSales(_sumLKBSales);\n\n    setStatSales(_statSales);\n    setStatLWSales(_statLWSales);\n    setPeriodSales(_periodSales);\n    setPeriodTargetSales(_periodTargetSales);\n    setPeriodUCLSales(_periodUCLSales);\n    setPeriodPTKSales(_periodPTKSales);\n    setPeriodLKBSales(_periodLKBSales);\n  }, [transactions, duration, branch]);\n\n  console.log(\"Customer list\",customerList);\n  console.log(\"Transaction list\",transactions);\n  console.log(\"Forecast list\", forecastList);\n  console.log(\"Report list\", reportList);\n  console.log(\"Target list\", targetList);\n\n  const leadConversionBySourceData = [\n    {\n      \"สาขา\": \"UCL\",\n      \"Online\": channelUCLOnline,\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\n      \"Offline\": channelUCLOffline,\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\n    },\n    {\n      \"สาขา\": \"PTK\",\n      \"Online\": channelPTKOnline,\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\n      \"Offline\": channelPTKOffline,\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\n    },\n    {\n      \"สาขา\": \"LKB\",\n      \"Online\": channelLKBOnline,\n      \"OnlineColor\": \"hsl(220, 70%, 50%)\",\n      \"Offline\": channelLKBOffline,\n      \"OfflineColor\": \"hsl(240, 70%, 50%)\"\n    },\n  ]\n\n  const salesFunnelByBranch = [\n    {\n      \"สถานะ\": \"Leads\",\n      \"UCL\": statLeadsUCL,\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\n      \"PTK\": statLeadsPTK,\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\n      \"LKB\": statLeadsLKB,\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\n    },\n    {\n      \"สถานะ\": \"Customers\",\n      \"UCL\": statCustomersUCL,\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\n      \"PTK\": statCustomersPTK,\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\n      \"LKB\": statCustomersLKB,\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\n    },\n    {\n      \"สถานะ\": \"Expansions\",\n      \"UCL\": statExpansionsUCL,\n      \"UCLColor\": \"hsl(220, 70%, 50%)\",\n      \"PTK\": statExpansionsPTK,\n      \"PTKColor\": \"hsl(240, 70%, 50%)\",\n      \"LKB\": statExpansionsLKB,\n      \"LKBColor\": \"hsl(54, 70%, 50%)\",\n    },\n  ]\n\n  function formatted(input) {\n    return input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  function formattedSign(input, text=\"\") {\n    if(input >= 0) return <label className=\"positive\">{\"+\" + input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + text}</label>;\n    else return <label className=\"negative\">{\"-\" + input.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + text}</label>;\n  }\n\n  function formattedDec(input, text) {\n    if(input >= 0) return <label className=\"positive\">{\"+\" + input.toFixed(2) + text}</label>;\n    else return <label className=\"negative\">{\"-\" + input.toFixed(2) + text}</label>;\n  }\n\n  function yearTransaction(year) {\n    return transactions.filter(function(transaction) {\n      return transaction.year == year && transaction.stage == \"Customer\"\n    });\n  }\n\n  function monthTransaction(month) {\n    return transactions.filter(function(transaction) {\n      return transaction.month == month && transaction.stage == \"Customer\"\n    });\n  }\n\n  function weekTransaction(week) {\n    return transactions.filter(function(transaction) {\n      return transaction.week == week  && transaction.stage == \"Customer\"\n    });\n  }\n\n  function sum(array ,key) {\n    return targetList !== undefined ? array.reduce((a, b) => a + (parseInt(b[key]) || 0), 0) : 0 ;\n  }\n\n  function week(year, month_number) {\n    var firstOfMonth = new Date(year, month_number-1, 1);\n    var lastOfMonth = new Date(year, month_number, 0);\n    var used = firstOfMonth.getDay() + lastOfMonth.getDate();\n    return Math.ceil( used / 7);\n  }\n\n\n  return (\n    <>\n      {loading && <LoadingBar />}\n      {success && <SuccessBar setSuccess={setSuccess} />}\n      {error && <ErrorBar setError={setError} />}\n      <div className=\"header\">\n        <img src={logo} className=\"logo\" />\n      </div>\n      <div className=\"header-greeting\">\n        <h1>CRM </h1>\n        <div>สวัสดี, SPORT FOR LIFE</div>\n        <div>\n          <ReactToPdf targetRef={ref} filename=\"SFL-Report.pdf\">\n              {({toPdf}) => (\n                  <button onClick={toPdf}>Generate pdf</button>\n              )}\n          </ReactToPdf>\n          <div>\n            {/*\n            <select>\n              {\n                numberOfWeek.map(function(item, i){\n                  return <option value={item} onChange={(e) => {setSelectedWeek(e.target.value)}}>WK{item}</option>\n                })\n              }\n            </select>\n            <div>Selected WK{selectedWeek && selectedWeek}</div>\n            */}\n          </div>\n          <Report ref={ref}/>\n        </div>\n      </div>\n\n      <Navbar active={\"Dashboard\"} />\n    </>\n  );\n\n  function Report(props) {\n    return (\n      <>\n      <Formik\n          enableReinitialize\n          initialValues={{ ...initialForm }}\n          validationSchema={formValidation}\n          validateOnChange={false}\n          validateOnBlur={false}\n          \n          onSubmit={async (values, { setSubmitting,resetForm }) => {\n            setSuccess(\"\")\n            console.log(values);\n            setSubmitting(true);\n            setLoading(true);\n            setSubmitting(false);\n            setLoading(false);\n            let forecast = {\n              sales : values.sales ? values.sales : 0,\n              customers : values.customers ? values.customers : 0,\n              week: moment().week(),\n              year: \"2021\"\n            }\n            updateForecast(\"2021\", \"22\", forecast)\n\n            let reports = {\n              section1 : values.section1 ? values.section1 : \"-\",\n              section2 : values.section2 ? values.section2 : \"-\",\n              section3 : values.section3 ? values.section3 : \"-\",\n              section4 : values.section4 ? values.section4 : \"-\",\n              section5: values.section5 ? values.section5 : \"-\",\n              section6: values.section6 ? values.section6 : \"-\",\n              section7: values.section7 ? values.section7 : \"-\",\n              section8: values.section8 ? values.section8 : \"-\",\n              section9: values.section9 ? values.section9 : \"-\",\n              section10: values.section10 ? values.section10 : \"-\",\n              section11: values.section11 ? values.section11 : \"-\",\n              section12: values.section12 ? values.section12 : \"-\",\n              section13: values.section13 ? values.section13 : \"-\",\n            }\n            updateReport(\"2021\", \"22\", reports)\n\n            setSuccess(\"บันทึกข้อมูลสำเร็จ\")\n            return;\n          }}\n        >\n          {({\n            values,\n            errors,\n            touched,\n            handleChange,\n            handleBlur,\n            handleSubmit,\n            isSubmitting,\n            setFieldValue,\n            resetForm\n          }) => (\n            <form onSubmit={handleSubmit}>\n              <label className=\"formError\">\n                {errors.sales && errors.sales}\n                {errors.customers && errors.customers}\n              </label>\n\n              <div className={\"report\"} style={{textAlign: \"center\"}} ref={ref}>\n                <div className={\"reportCover\"}>\n                  <h1>Sport for life report</h1>\n                  <div>รายงานประจำ WK21</div>\n                  <div>23 พฤษภาคม 2564 ถึง 29 พฤษภาคม 2564</div>\n                </div>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                <h1>Sales Performance</h1>\n                <div>WK21 - 23 พฤษภาคม 2564 ถึง 29 พฤษภาคม 2564</div>\n                <div class=\"wrapper-one\">\n                  <div className=\"graph\"  style={{height:\"350px\"}}>\n                <table>\n                      <tr>\n                        <th>ตัวชี้วัด</th>\n                        <th>2021</th>\n                        <th>May</th>\n                        <th>WK{moment().week()-2}</th>\n                        <th>WK{moment().week()-1}</th>\n                        <th>คาดกาณ์ WK{moment().week()-1}</th>\n                        <th>ผลต่าง</th>\n                        <th>คาดการณ์ WK22</th>\n                      </tr>\n                      <tr>\n                        <td>ยอด Sales</td>\n                        <td>1,256,294{/*sum(yearTransaction(2021), \"customer_sales\")*/}</td>\n                        <td>1,237,713{/*sum(monthTransaction(5), \"customer_sales\")*/}</td>\n                        <td>5,430{/*sum(weekTransaction(moment().week()-2), \"customer_sales\")*/}</td>\n                        <td>1,003,453{/*sum(weekTransaction(moment().week()-1), \"customer_sales\")*/}</td>\n                        <td>{forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].sales : 0}</td>\n                        <td>{sum(weekTransaction(moment().week()-1), \"customer_sales\") - (forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].sales : 0)}</td>\n                        <td>\n                          {values.forecastSales}\n                          <input\n                            type=\"number\"\n                            placeholder=\"Target Sales\"\n                            onChange={handleChange}\n                            onBlur={handleBlur}\n                            name={\"sales\"}\n                            value={values.sales}\n                          />\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>Target Sales</td>\n                        <td>{formatted(targetList !== undefined && targetList.ucl[\"2021\"].reduce((a, b) => a + (parseInt(b) || 0), 0))}</td>\n                        <td>{targetList !== undefined && targetList.ucl[\"2021\"][4] ? targetList.ucl[\"2021\"][4] : 0 }</td>\n                        <td>{parseInt((targetList !== undefined && targetList.ucl[\"2021\"][4] ? targetList.ucl[\"2021\"][4] : 0 )*1/week(2021,5))}</td>\n                        <td>{parseInt((targetList !== undefined && targetList.ucl[\"2021\"][4] ? targetList.ucl[\"2021\"][4] : 0 )*1/week(2021,5))}</td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                      </tr>\n                      <tr>\n                        <td>vs Target</td>\n                        <td>-</td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                      </tr>\n                      <tr>\n                        <td>จำนวน Customers</td>\n                        <td>{yearTransaction(moment().year()).length}</td>\n                        <td>{monthTransaction(moment().month()).length}</td>\n                        <td>{weekTransaction(moment().week()-2).length}</td>\n                        <td>{weekTransaction(moment().week()-1).length}</td>\n                        <td>{forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].customers : 0}</td>\n                        <td>{forecastList !== undefined && weekTransaction(moment().week()-1).length - forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].customers : 0}</td>\n                        <td>\n                          {values.forecastCustomers}\n                          <input\n                            type=\"number\"\n                            placeholder=\"Target Customers\"\n                            onChange={handleChange}\n                            onBlur={handleBlur}\n                            name={\"customers\"}\n                            value={values.customers}\n                          />\n                        </td>\n                      </tr>\n                      <tr>\n                        <td>Sales/Customer</td>\n                        <td>{yearTransaction(moment().year()).length == 0 ? \"-\" : sum(yearTransaction(2021), \"customer_sales\") / yearTransaction(moment().year()).length}</td>\n                        <td>{monthTransaction(moment().month()).length == 0 ? \"-\" : sum(monthTransaction(5), \"customer_sales\") / monthTransaction(moment().year()).length}</td>\n                        <td>{weekTransaction(moment().week()-2).length == 0 ? \"-\" : sum(weekTransaction(moment().week()-2), \"customer_sales\") / weekTransaction(moment().week()-2).length}</td>\n                        <td>{weekTransaction(moment().week()-1).length == 0 ? \"-\" : sum(weekTransaction(moment().week()-1), \"customer_sales\") / weekTransaction(moment().week()-1).length}</td>\n                        <td>{(forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].customers : 0) == 0 ? \"-\" : (forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].sales : 0) / (forecastList !== undefined && forecastList.hasOwnProperty([\"2021-\"+moment().week()-1]) ? forecastList[\"2021-\"+moment().week()-1].customers : 0)}</td>\n                        <td></td>\n                        <td>{values.customers == 0 ? \"-\" : parseInt(values.sales / values.customers)}</td>\n                      </tr>\n                    </table>\n                </div>\n                  <div className=\"graph\" style={{height:\"250px\"}}>\n                <h4>ยอด Sales (Actual VS Target)</h4>\n                  <ResponsiveLine\n                    data={[\n                      {\n                        \"id\": \"Actual\",\n                        \"color\": \"hsl(254, 70%, 50%)\",\n                        \"data\": [\n                          {\n                            \"x\": \"Jan\",\n                            \"y\": periodSales && periodSales[0]\n                          },\n                          {\n                            \"x\": \"Feb\",\n                            \"y\": periodSales && periodSales[1]\n                          },\n                          {\n                            \"x\": \"Mar\",\n                            \"y\": periodSales && periodSales[2]\n                          },\n                          {\n                            \"x\": \"Apr\",\n                            \"y\": periodSales && periodSales[3]\n                          },\n                          {\n                            \"x\": \"May\",\n                            \"y\": periodSales && periodSales[4]\n                          },\n                          {\n                            \"x\": \"Jun\",\n                            \"y\": periodSales && periodSales[5]\n                          },\n                          {\n                            \"x\": \"Jul\",\n                            \"y\": periodSales && periodSales[6]\n                          },\n                          {\n                            \"x\": \"Aug\",\n                            \"y\": periodSales && periodSales[7]\n                          },\n                          {\n                            \"x\": \"Sep\",\n                            \"y\": periodSales && periodSales[8]\n                          },\n                          {\n                            \"x\": \"Oct\",\n                            \"y\": periodSales && periodSales[9]\n                          },\n                          {\n                            \"x\": \"Nov\",\n                            \"y\": periodSales && periodSales[10]\n                          },\n                          {\n                            \"x\": \"Dec\",\n                            \"y\": periodSales && periodSales[11]\n                          }\n                        ]\n                      },\n                      {\n                        \"id\": \"Target\",\n                        \"color\": \"hsl(317, 70%, 50%)\",\n                        \"data\": [\n                          {\n                            \"x\": \"Jan\",\n                            \"y\": periodTargetSales && periodTargetSales[0]\n                          },\n                          {\n                            \"x\": \"Feb\",\n                            \"y\": periodTargetSales && periodTargetSales[1]\n                          },\n                          {\n                            \"x\": \"Mar\",\n                            \"y\": periodTargetSales && periodTargetSales[2]\n                          },\n                          {\n                            \"x\": \"Apr\",\n                            \"y\": periodTargetSales && periodTargetSales[3]\n                          },\n                          {\n                            \"x\": \"May\",\n                            \"y\": periodTargetSales && periodTargetSales[4]\n                          },\n                          {\n                            \"x\": \"Jun\",\n                            \"y\": periodTargetSales && periodTargetSales[5]\n                          },\n                          {\n                            \"x\": \"Jul\",\n                            \"y\": periodTargetSales && periodTargetSales[6]\n                          },\n                          {\n                            \"x\": \"Aug\",\n                            \"y\": periodTargetSales && periodTargetSales[7]\n                          },\n                          {\n                            \"x\": \"Sep\",\n                            \"y\": periodTargetSales && periodTargetSales[8]\n                          },\n                          {\n                            \"x\": \"Oct\",\n                            \"y\": periodTargetSales && periodTargetSales[9]\n                          },\n                          {\n                            \"x\": \"Nov\",\n                            \"y\": periodTargetSales && periodTargetSales[10]\n                          },\n                          {\n                            \"x\": \"Dec\",\n                            \"y\": periodTargetSales && periodTargetSales[11]\n                          }\n                        ]\n                      }\n                    ]}\n                    margin={{ top: 0, right: 110, bottom: 50, left: 60 }}\n                    xScale={{ type: 'point' }}\n                    yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\n                    yFormat=\" >-.2f\"\n                    axisTop={null}\n                    axisRight={null}\n                    axisBottom={{\n                        orient: 'bottom',\n                        tickSize: 5,\n                        tickPadding: 5,\n                        tickRotation: 0,\n                        legend: 'ช่วงเวลา',\n                        legendOffset: 36,\n                        legendPosition: 'middle'\n                    }}\n                    axisLeft={{\n                        orient: 'left',\n                        tickSize: 5,\n                        tickPadding: 5,\n                        tickRotation: 0,\n                        legend: '',\n                        legendOffset: -40,\n                        legendPosition: 'middle'\n                    }}\n                    pointSize={10}\n                    pointColor={{ theme: 'background' }}\n                    pointBorderWidth={2}\n                    pointBorderColor={{ from: 'serieColor' }}\n                    pointLabelYOffset={-12}\n                    useMesh={true}\n                    legends={[\n                        {\n                            anchor: 'bottom-right',\n                            direction: 'column',\n                            justify: false,\n                            translateX: 100,\n                            translateY: 0,\n                            itemsSpacing: 0,\n                            itemDirection: 'left-to-right',\n                            itemWidth: 80,\n                            itemHeight: 20,\n                            itemOpacity: 0.75,\n                            symbolSize: 12,\n                            symbolShape: 'circle',\n                            symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                            effects: [\n                                {\n                                    on: 'hover',\n                                    style: {\n                                        itemBackground: 'rgba(0, 0, 0, .03)',\n                                        itemOpacity: 1\n                                    }\n                                }\n                            ]\n                        }\n                    ]}\n                />\n                </div>\n                  <div>\n                    <textarea \n                      type=\"text\"\n                      placeholder=\"Comment\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      name={\"section1\"}>\n                    {values.section1}\n                    </textarea>\n                  </div>\n                </div>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                  <textarea \n                  type=\"text\"\n                  placeholder=\"Comment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  name={\"section2\"}>\n                  {values.section2}\n                  </textarea>\n                <h1>Sales Performance</h1>\n                <div>WK21 - 23 พฤษภาคม 2564 ถึง 29 พฤษภาคม 2564</div>\n                <div class=\"wrapper-one\">\n                  <div className=\"graph\">\n                  <h4>ยอด Sales รายสาขา</h4>\n      <ResponsiveLine\n        data={[\n          {\n            \"id\": \"UCL\",\n            \"color\": \"hsl(177, 70%, 50%)\",\n            \"data\": [\n              {\n                \"x\": \"Jan\",\n                \"y\": periodUCLSales && periodUCLSales[0]\n              },\n              {\n                \"x\": \"Feb\",\n                \"y\": periodUCLSales && periodUCLSales[1]\n              },\n              {\n                \"x\": \"Mar\",\n                \"y\": periodUCLSales && periodUCLSales[2]\n              },\n              {\n                \"x\": \"Apr\",\n                \"y\": periodUCLSales && periodUCLSales[3]\n              },\n              {\n                \"x\": \"May\",\n                \"y\": periodUCLSales && periodUCLSales[4]\n              },\n              {\n                \"x\": \"Jun\",\n                \"y\": periodUCLSales && periodUCLSales[5]\n              },\n              {\n                \"x\": \"Jul\",\n                \"y\": periodUCLSales && periodUCLSales[6]\n              },\n              {\n                \"x\": \"Aug\",\n                \"y\": periodUCLSales && periodUCLSales[7]\n              },\n              {\n                \"x\": \"Sep\",\n                \"y\": periodUCLSales && periodUCLSales[8]\n              },\n              {\n                \"x\": \"Oct\",\n                \"y\": periodUCLSales && periodUCLSales[9]\n              },\n              {\n                \"x\": \"Nov\",\n                \"y\": periodUCLSales && periodUCLSales[10]\n              },\n              {\n                \"x\": \"Dec\",\n                \"y\": periodUCLSales && periodUCLSales[11]\n              }\n            ]\n          },\n          {\n            \"id\": \"LKB\",\n            \"color\": \"hsl(254, 70%, 50%)\",\n            \"data\": [\n              {\n                \"x\": \"Jan\",\n                \"y\": periodLKBSales && periodLKBSales[0]\n              },\n              {\n                \"x\": \"Feb\",\n                \"y\": periodLKBSales && periodLKBSales[1]\n              },\n              {\n                \"x\": \"Mar\",\n                \"y\": periodLKBSales && periodLKBSales[2]\n              },\n              {\n                \"x\": \"Apr\",\n                \"y\": periodLKBSales && periodLKBSales[3]\n              },\n              {\n                \"x\": \"May\",\n                \"y\": periodLKBSales && periodLKBSales[4]\n              },\n              {\n                \"x\": \"Jun\",\n                \"y\": periodLKBSales && periodLKBSales[5]\n              },\n              {\n                \"x\": \"Jul\",\n                \"y\": periodLKBSales && periodLKBSales[6]\n              },\n              {\n                \"x\": \"Aug\",\n                \"y\": periodLKBSales && periodLKBSales[7]\n              },\n              {\n                \"x\": \"Sep\",\n                \"y\": periodLKBSales && periodLKBSales[8]\n              },\n              {\n                \"x\": \"Oct\",\n                \"y\": periodLKBSales && periodLKBSales[9]\n              },\n              {\n                \"x\": \"Nov\",\n                \"y\": periodLKBSales && periodLKBSales[10]\n              },\n              {\n                \"x\": \"Dec\",\n                \"y\": periodLKBSales && periodLKBSales[11]\n              }\n            ]\n          },\n          {\n            \"id\": \"PTK\",\n            \"color\": \"hsl(140, 70%, 50%)\",\n            \"data\": [\n              {\n                \"x\": \"Jan\",\n                \"y\": periodPTKSales && periodPTKSales[0]\n              },\n              {\n                \"x\": \"Feb\",\n                \"y\": periodPTKSales && periodPTKSales[1]\n              },\n              {\n                \"x\": \"Mar\",\n                \"y\": periodPTKSales && periodPTKSales[2]\n              },\n              {\n                \"x\": \"Apr\",\n                \"y\": periodPTKSales && periodPTKSales[3]\n              },\n              {\n                \"x\": \"May\",\n                \"y\": periodPTKSales && periodPTKSales[4]\n              },\n              {\n                \"x\": \"Jun\",\n                \"y\": periodPTKSales && periodPTKSales[5]\n              },\n              {\n                \"x\": \"Jul\",\n                \"y\": periodPTKSales && periodPTKSales[6]\n              },\n              {\n                \"x\": \"Aug\",\n                \"y\": periodPTKSales && periodPTKSales[7]\n              },\n              {\n                \"x\": \"Sep\",\n                \"y\": periodPTKSales && periodPTKSales[8]\n              },\n              {\n                \"x\": \"Oct\",\n                \"y\": periodPTKSales && periodPTKSales[9]\n              },\n              {\n                \"x\": \"Nov\",\n                \"y\": periodPTKSales && periodPTKSales[10]\n              },\n              {\n                \"x\": \"Dec\",\n                \"y\": periodPTKSales && periodPTKSales[11]\n              }\n            ]\n          }\n        ]}\n        margin={{ top: 50, right: 110, bottom: 50, left: 60 }}\n        xScale={{ type: 'point' }}\n        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\n        yFormat=\" >-.2f\"\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            orient: 'bottom',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'ช่วงเวลา',\n            legendOffset: 36,\n            legendPosition: 'middle'\n        }}\n        axisLeft={{\n            orient: 'left',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: '',\n            legendOffset: -40,\n            legendPosition: 'middle'\n        }}\n        pointSize={10}\n        pointColor={{ theme: 'background' }}\n        pointBorderWidth={2}\n        pointBorderColor={{ from: 'serieColor' }}\n        pointLabelYOffset={-12}\n        useMesh={true}\n        legends={[\n            {\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: false,\n                translateX: 100,\n                translateY: 0,\n                itemsSpacing: 0,\n                itemDirection: 'left-to-right',\n                itemWidth: 80,\n                itemHeight: 20,\n                itemOpacity: 0.75,\n                symbolSize: 12,\n                symbolShape: 'circle',\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemBackground: 'rgba(0, 0, 0, .03)',\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n    />\n                  </div>\n                  <div>\n                    <div>สาขา UCL</div>\n                    <textarea \n                      type=\"text\"\n                      placeholder=\"Comment\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      name={\"section3\"}>\n                      {values.section3}\n                      </textarea>\n                  </div>\n                </div>\n              </div>\n              \n              <div className={\"report\"} ref={ref}>\n                <div>สาขา PTK</div>\n                <textarea \n                type=\"text\"\n                placeholder=\"Comment\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                name={\"section4\"}>\n                {values.section4}\n                </textarea>\n\n                <div>สาขา LKB</div>\n                <textarea \n                type=\"text\"\n                placeholder=\"Comment\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                name={\"section5\"}>\n                {values.section5}\n                </textarea>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                <h1>Sales funnel</h1>\n                <div>WK21 - 23 พฤษภาคม 2564 ถึง 29 พฤษภาคม 2564</div>\n                \n                <div class=\"wrapper-one\">\n                  <div className=\"graph\" style={{height:\"300px\"}}>\n                    <h4>Sales Funnel</h4>\n                    <ResponsiveFunnel\n                      data={[\n                        {\n                          \"id\": \"Leads\",\n                          \"value\": statLeads,\n                          \"label\": \"Leads\"\n                        },\n                        {\n                          \"id\": \"Customers\",\n                          \"value\": statCustomers,\n                          \"label\": \"Customers\"\n                        },\n                        {\n                          \"id\": \"Expansions\",\n                          \"value\": statExpansions,\n                          \"label\": \"Expansions\"\n                        }\n                      ]}\n                      margin={{ top: 20, right: 20, bottom: 20, left: 20 }}\n                      direction=\"horizontal\"\n                      valueFormat=\">-.4s\"\n                      colors={{ scheme: 'spectral' }}\n                      borderWidth={20}\n                      labelColor={{ from: 'color', modifiers: [ [ 'darker', 3 ] ] }}\n                      beforeSeparatorLength={10}\n                      beforeSeparatorOffset={20}\n                      afterSeparatorLength={10}\n                      afterSeparatorOffset={20}\n                      currentPartSizeExtension={10}\n                      currentBorderWidth={40}\n                      motionConfig=\"wobbly\"\n                    />\n                  </div>\n                  <div className=\"graph\" style={{height:\"300px\"}}>\n                  <h4>Lead แต่ละ Channel</h4>\n      <ResponsiveBar\n        data={leadConversionBySourceData}\n        keys={[ 'Online', 'Offline' ]}\n        indexBy=\"สาขา\"\n        margin={{ top: 50, right: 130, bottom: 50, left: 60 }}\n        padding={0.3}\n        valueScale={{ type: 'linear' }}\n        indexScale={{ type: 'band', round: true }}\n        colors={{ scheme: 'nivo' }}\n        defs={[\n            {\n                id: 'dots',\n                type: 'patternDots',\n                background: 'inherit',\n                color: '#38bcb2',\n                size: 4,\n                padding: 1,\n                stagger: true\n            },\n            {\n                id: 'lines',\n                type: 'patternLines',\n                background: 'inherit',\n                color: '#eed312',\n                rotation: -45,\n                lineWidth: 6,\n                spacing: 10\n            }\n        ]}\n        fill={[\n            {\n                match: {\n                    id: 'fries'\n                },\n                id: 'dots'\n            },\n            {\n                match: {\n                    id: 'sandwich'\n                },\n                id: 'lines'\n            }\n        ]}\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'สาขา',\n            legendPosition: 'middle',\n            legendOffset: 32\n        }}\n        axisLeft={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'จำนวน',\n            legendPosition: 'middle',\n            legendOffset: -40\n        }}\n        labelSkipWidth={12}\n        labelSkipHeight={12}\n        labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\n        legends={[\n            {\n                dataFrom: 'keys',\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: false,\n                translateX: 120,\n                translateY: 0,\n                itemsSpacing: 2,\n                itemWidth: 100,\n                itemHeight: 20,\n                itemDirection: 'left-to-right',\n                itemOpacity: 0.85,\n                symbolSize: 20,\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n        animate={true}\n        motionStiffness={90}\n        motionDamping={15}\n    />\n                  </div>\n                  <div>\n                    <textarea \n                    type=\"text\"\n                    placeholder=\"Comment\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    name={\"section6\"}>\n                    {values.section6}\n                    </textarea>\n                  </div>\n                </div>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                <div class=\"wrapper-one\">\n                <div className=\"graph\">\n                    <h4>Sales funnel แต่ละสาขา</h4>\n                    <ResponsiveBar\n                      data={salesFunnelByBranch}\n                      keys={[ 'UCL', 'PTK', 'LKB' ]}\n                      indexBy=\"สถานะ\"\n                      margin={{ top: 50, right: 130, bottom: 50, left: 60 }}\n                      padding={0.3}\n                      valueScale={{ type: 'linear' }}\n                      indexScale={{ type: 'band', round: true }}\n                      colors={{ scheme: 'nivo' }}\n                      defs={[\n                          {\n                              id: 'dots',\n                              type: 'patternDots',\n                              background: 'inherit',\n                              color: '#38bcb2',\n                              size: 4,\n                              padding: 1,\n                              stagger: true\n                          },\n                          {\n                              id: 'lines',\n                              type: 'patternLines',\n                              background: 'inherit',\n                              color: '#eed312',\n                              rotation: -45,\n                              lineWidth: 6,\n                              spacing: 10\n                          }\n                      ]}\n                      fill={[\n                          {\n                              match: {\n                                  id: 'fries'\n                              },\n                              id: 'dots'\n                          },\n                          {\n                              match: {\n                                  id: 'sandwich'\n                              },\n                              id: 'lines'\n                          }\n                      ]}\n                      borderColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\n                      axisTop={null}\n                      axisRight={null}\n                      axisBottom={{\n                          tickSize: 5,\n                          tickPadding: 5,\n                          tickRotation: 0,\n                          legend: 'สถานะ',\n                          legendPosition: 'middle',\n                          legendOffset: 32\n                      }}\n                      axisLeft={{\n                          tickSize: 5,\n                          tickPadding: 5,\n                          tickRotation: 0,\n                          legend: 'จำนวน',\n                          legendPosition: 'middle',\n                          legendOffset: -40\n                      }}\n                      labelSkipWidth={12}\n                      labelSkipHeight={12}\n                      labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\n                      legends={[\n                          {\n                              dataFrom: 'keys',\n                              anchor: 'bottom-right',\n                              direction: 'column',\n                              justify: false,\n                              translateX: 120,\n                              translateY: 0,\n                              itemsSpacing: 2,\n                              itemWidth: 100,\n                              itemHeight: 20,\n                              itemDirection: 'left-to-right',\n                              itemOpacity: 0.85,\n                              symbolSize: 20,\n                              effects: [\n                                  {\n                                      on: 'hover',\n                                      style: {\n                                          itemOpacity: 1\n                                      }\n                                  }\n                              ]\n                          }\n                      ]}\n                      animate={true}\n                      motionStiffness={90}\n                      motionDamping={15}\n                  />\n                  </div>\n                </div>\n                <div>สาขา UCL</div>\n                <textarea \n                type=\"text\"\n                placeholder=\"Comment\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                name={\"section7\"}>\n                {values.section7}\n                </textarea>\n\n                <div>สาขา PTK</div>\n                <textarea \n                type=\"text\"\n                placeholder=\"Comment\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                name={\"section8\"}>\n                {values.section8}\n                </textarea>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                <div>สาขา LKB</div>\n                <textarea \n                type=\"text\"\n                placeholder=\"Comment\"\n                onChange={handleChange}\n                onBlur={handleBlur}\n                name={\"section9\"}>\n                {values.section9}\n                </textarea>\n                \n                <h1>เหตุผลลูกค้า / หมวดหมู่สินค้าที่ Leads สนใจ</h1>\n                  <div>WK21 - 23 พฤษภาคม 2564 ถึง 29 พฤษภาคม 2564</div>\n                <div class=\"wrapper-two\">\n                  <div className=\"graph\">\n                  <h4>เหตุผลลูกค้า</h4>\n                  <ResponsivePie\n          data={lostsReason}\n          margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\n          innerRadius={0.5}\n          padAngle={0.7}\n          cornerRadius={3}\n          activeOuterRadiusOffset={8}\n          borderWidth={1}\n          borderColor={{ from: 'color', modifiers: [ [ 'darker', 0.2 ] ] }}\n          arcLinkLabelsSkipAngle={10}\n          arcLinkLabelsTextColor=\"#333333\"\n          arcLinkLabelsThickness={2}\n          arcLinkLabelsColor={{ from: 'color' }}\n          arcLabelsSkipAngle={10}\n          arcLabelsTextColor={{ from: 'color', modifiers: [ [ 'darker', 2 ] ] }}\n          defs={[\n              {\n                  id: 'dots',\n                  type: 'patternDots',\n                  background: 'inherit',\n                  color: 'rgba(255, 255, 255, 0.3)',\n                  size: 4,\n                  padding: 1,\n                  stagger: true\n              },\n              {\n                  id: 'lines',\n                  type: 'patternLines',\n                  background: 'inherit',\n                  color: 'rgba(255, 255, 255, 0.3)',\n                  rotation: -45,\n                  lineWidth: 6,\n                  spacing: 10\n              }\n          ]}\n          fill={[\n              {\n                  match: {\n                      id: 'ruby'\n                  },\n                  id: 'dots'\n              },\n              {\n                  match: {\n                      id: 'c'\n                  },\n                  id: 'dots'\n              },\n              {\n                  match: {\n                      id: 'go'\n                  },\n                  id: 'dots'\n              },\n              {\n                  match: {\n                      id: 'python'\n                  },\n                  id: 'dots'\n              },\n              {\n                  match: {\n                      id: 'scala'\n                  },\n                  id: 'lines'\n              },\n              {\n                  match: {\n                      id: 'lisp'\n                  },\n                  id: 'lines'\n              },\n              {\n                  match: {\n                      id: 'elixir'\n                  },\n                  id: 'lines'\n              },\n              {\n                  match: {\n                      id: 'javascript'\n                  },\n                  id: 'lines'\n              }\n          ]}\n          legends={[\n              {\n                  anchor: 'bottom',\n                  direction: 'row',\n                  justify: false,\n                  translateX: 0,\n                  translateY: 56,\n                  itemsSpacing: 0,\n                  itemWidth: 100,\n                  itemHeight: 18,\n                  itemTextColor: '#999',\n                  itemDirection: 'left-to-right',\n                  itemOpacity: 1,\n                  symbolSize: 18,\n                  symbolShape: 'circle',\n                  effects: [\n                      {\n                          on: 'hover',\n                          style: {\n                              itemTextColor: '#000'\n                          }\n                      }\n                  ]\n              }\n          ]}\n      />\n                  </div>\n                  <div className=\"graph\">\n                  <h4>หมวดหมู่สินค้าที่ Leads สนใจ</h4>\n                  <ResponsivePie\n        data={categorySales}\n        margin={{ top: 40, right: 80, bottom: 80, left: 80 }}\n        innerRadius={0.5}\n        padAngle={0.7}\n        cornerRadius={3}\n        activeOuterRadiusOffset={8}\n        borderWidth={1}\n        borderColor={{ from: 'color', modifiers: [ [ 'darker', 0.2 ] ] }}\n        arcLinkLabelsSkipAngle={10}\n        arcLinkLabelsTextColor=\"#333333\"\n        arcLinkLabelsThickness={2}\n        arcLinkLabelsColor={{ from: 'color' }}\n        arcLabelsSkipAngle={10}\n        arcLabelsTextColor={{ from: 'color', modifiers: [ [ 'darker', 2 ] ] }}\n        defs={[\n            {\n                id: 'dots',\n                type: 'patternDots',\n                background: 'inherit',\n                color: 'rgba(255, 255, 255, 0.3)',\n                size: 4,\n                padding: 1,\n                stagger: true\n            },\n            {\n                id: 'lines',\n                type: 'patternLines',\n                background: 'inherit',\n                color: 'rgba(255, 255, 255, 0.3)',\n                rotation: -45,\n                lineWidth: 6,\n                spacing: 10\n            }\n        ]}\n        fill={[\n            {\n                match: {\n                    id: 'ruby'\n                },\n                id: 'dots'\n            },\n            {\n                match: {\n                    id: 'c'\n                },\n                id: 'dots'\n            },\n            {\n                match: {\n                    id: 'go'\n                },\n                id: 'dots'\n            },\n            {\n                match: {\n                    id: 'python'\n                },\n                id: 'dots'\n            },\n            {\n                match: {\n                    id: 'scala'\n                },\n                id: 'lines'\n            },\n            {\n                match: {\n                    id: 'lisp'\n                },\n                id: 'lines'\n            },\n            {\n                match: {\n                    id: 'elixir'\n                },\n                id: 'lines'\n            },\n            {\n                match: {\n                    id: 'javascript'\n                },\n                id: 'lines'\n            }\n        ]}\n        legends={[\n            {\n                anchor: 'bottom',\n                direction: 'row',\n                justify: false,\n                translateX: 0,\n                translateY: 56,\n                itemsSpacing: 0,\n                itemWidth: 100,\n                itemHeight: 18,\n                itemTextColor: '#999',\n                itemDirection: 'left-to-right',\n                itemOpacity: 1,\n                symbolSize: 18,\n                symbolShape: 'circle',\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemTextColor: '#000'\n                        }\n                    }\n                ]\n            }\n        ]}\n    />\n                  </div>\n                </div>\n                <div>\n                  <div>โดยรวม</div>\n                  <textarea \n                  type=\"text\"\n                  placeholder=\"Comment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  name={\"section10\"}>\n                  {values.section10}\n                  </textarea>\n                </div>\n              </div>\n\n              <div className={\"report\"} ref={ref}>\n                <div>สาขา UCL</div>\n                  <textarea \n                  type=\"text\"\n                  placeholder=\"Comment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  name={\"section11\"}>\n                  {values.section11}\n                  </textarea>\n\n                  <div>สาขา PTK</div>\n                  <textarea \n                  type=\"text\"\n                  placeholder=\"Comment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  name={\"section12\"}>\n                  {values.section12}\n                  </textarea>\n\n                  <div>สาขา LKB</div>\n                  <textarea \n                  type=\"text\"\n                  placeholder=\"Comment\"\n                  onChange={handleChange}\n                  onBlur={handleBlur}\n                  name={\"section13\"}>\n                  {values.section13}\n                  </textarea>\n              </div>\n\n              {success && (\n              <div className=\"success\">\n                {success}\n              </div>\n              )}\n              \n              <div className=\"actionButton\">\n                <button\n                  className=\"mainButton\"\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                >\n                  บันทึก\n                </button>\n                <button\n                  type=\"reset\"\n                  className=\"resetButton\"\n                  onClick={() => {\n                    resetForm();\n                  }}\n                >\n                  ล้างค่า\n                </button>\n              </div>\n            </form>\n          )}\n        </Formik>\n  </>\n    )\n  }\n\n  function WeekSelector() {\n    for (var i = 1; i <= moment().week(); i++) {\n      return <option value={i}>WK{i}</option>\n    }\n    \n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Route, BrowserRouter as Router, Switch, Link } from \"react-router-dom\";\n\nimport InsertPage from \"./pages/InsertPage\";\nimport ViewPage from \"./pages/ViewPage\";\nimport Dashboard from \"./pages/Dashboard\";\nimport Account from \"./pages/Account\";\nimport Report from \"./pages/Report\";\n\nimport { DataProvider } from \"./pages/Firestore\";\n\nimport \"./style.css\";\n\nexport default function App() {\n  const [navigator, setNavigator] = useState();\n  return (\n    <Router>\n      <DataProvider>\n        <Switch>\n          <Route\n            path=\"/\"\n            exact\n            render={props => <InsertPage {...props} isAuthed={true} />}\n          />\n          <Route\n            path=\"/view\"\n            render={props => <ViewPage {...props} isAuthed={true} />}\n          />\n          <Route\n            path=\"/dashboard\"\n            render={props => <Dashboard {...props} isAuthed={true} />}\n          />\n          <Route\n            path=\"/account\"\n            render={props => <Account {...props} isAuthed={true} />}\n          />\n          <Route\n            path=\"/report\"\n            render={props => <Report {...props} isAuthed={true} />}\n          />\n        </Switch>\n      </DataProvider>\n    </Router>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}